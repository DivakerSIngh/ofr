@model OneFineRateBLL.Entities.eBookingModify
@using OneFineRateAppUtil
@{
    ViewBag.Title = "Confirmation";
    Layout = "~/Views/Shared/_LayoutUserManagement.cshtml";
}



<div class="thirdsection margintop20">
    <div class="container">
        <div class="row">
            <div class="confbluehdg">


                <strong class="fontsize18a">Thanks @Model.Booker! We have recieved your negotiation. @Model.sMessage</strong>

            </div>



            <div class="col-md-8 col-xs-12">
                <div class="row">
                    <div class="col-md-4 col-xs-5">
                        <img src="@Model.sImgUrl" class="imgheight150" />
                    </div>
                    <div class="col-md-8 col-xs-7">
                        <h4 style="font-weight:bold;">@Model.HotelName</h4>
                        <img src="~/images/inner-star@(Model.StarCategoryId).png" /><br />
                        <p>
                            @Model.StreetAddress <br />
                            @Model.Address
                        </p>
                        @if (!string.IsNullOrEmpty(Model.RatingImageUrl))
                        {
                            <img src="@Model.RatingImageUrl" /><br />
                        }
                        @if (!string.IsNullOrEmpty(Model.RatingString))
                        {
                            <em class="green">
                                @Model.RatingString
                            </em>
                        }
                    </div>
                </div>
                <!--left column -->
                <div class="row">
                    <div class="col-md-2 col-xs-5 "><strong>Booking Date </strong></div>
                    <div class="col-xs-1" style="width:1% !important;">:</div>
                    <div class="col-md-3 col-xs-6 ">@Model.ReservationDate</div>
                    <div class="col-md-2 col-xs-5"><strong>Booking Id </strong></div>
                    <div class="col-xs-1" style="width:1% !important;">:</div>
                    <div class="col-md-3 col-xs-6 ">@Model.BookingId</div>


                </div>

                <div class="row">

                    <div class="col-md-2 col-xs-5 "><strong>Your Reservation  </strong></div>
                    <div class="col-xs-1" style="width:1% !important;">:</div>
                    <div class="col-md-9 col-xs-6 ">@Model.Reservation</div>

                </div>
                <div class="row">
                    <div class="col-md-2 col-xs-2"><strong>Status </strong></div>
                    <div class="col-xs-1" style="width:1% !important;">:</div>
                    <div class="col-md-9 col-xs-9 ">@Model.BookingStatus</div>
                </div>
                <div class="row">
                    <div class="col-md-2 col-xs-5"><strong>Check-In Date  </strong></div>
                    <div class="col-xs-1" style="width:1% !important;">:</div>
                    <div class="col-md-3 col-xs-6 ">@Model.CheckIn</div>
                    <div class="col-md-2 col-xs-5"><strong>Check-Out Date</strong></div>
                    <div class="col-xs-1" style="width:1% !important;">:</div>
                    <div class="col-md-3 col-xs-5 ">@Model.ChekOut</div>
                </div>

                <div class="row">
                    <div class="col-md-2 col-xs-5"><strong>Booked By </strong></div>
                    <div class="col-xs-1" style="width:1% !important;">:</div>
                    <div class="col-md-3 col-xs-6">@Model.Booker</div>
                    <div class="col-md-2 col-xs-5"><strong>Contact No</strong></div>
                    <div class="col-xs-1" style="width:1% !important;">:</div>
                    <div class="col-md-3 col-xs-6">@Model.MobileOFR</div>
                </div>
                <div class="row">
                    <div class="col-md-2 col-xs-5"><strong>E-mail Id  </strong></div>
                    <div class="col-xs-1" style="width:1% !important;">:</div>
                    <div class="col-md-3 col-xs-6">@Model.EmailOFR</div>


                </div>

            </div>
            <div class="col-md-4 col-xs-12">
                <div class="row">
                    <div class="margintop10 border1" style="width:100%;">
                        <div id="googleMap" style=" width:100%;height:150px;"></div>
                    </div>
                </div>
                <!-- RATE INFORMATION start-->
             

                    <div class="row">
                        <div class="col-xs-7"><strong>Your Negotiation Amount</strong></div>
                        <div class="col-xs-1">:</div>
                        <div class="col-xs-4">@Model.Symbol @clsUtils.ConvertNumberToCommaSeprated(Convert.ToDecimal(Model.dTotalNegotiateAmount))</div>
                    </div>
                    <div class="row">
                        <div class="col-xs-7">Taxes and Service Fees </div>
                        <div class="col-xs-1">:</div>
                        <div class="col-xs-4">@Model.Symbol @clsUtils.ConvertNumberToCommaSeprated(Convert.ToDecimal(Model.sExtra2))</div>
                    </div>

                    <hr />
                    <div class="row">
                        <div class="col-xs-7"><b>Total Charges </b></div>
                        <div class="col-xs-1">:</div>
                        <div class="col-xs-4"><b>@Model.Symbol @clsUtils.ConvertNumberToCommaSeprated(Convert.ToDecimal(Model.dOrginalSubTotalNego))</b></div>
                    </div>


                </div>


                    @*@if (Model.cBookingStatus == "NC" && Model.cBookingType == "N")
                    {
                        <div class="col-xs-12">
                            <div class="bluehdg paddlefttop">
                                <h5>Negotiation and Important Information</h5>

                            </div>
                            <div class="text-justify lineheight20">Please allow us approximately 3 hours to get you the rate of your choice (during business hours). If your negotiation is received beyond Business Hours, them we will get back to you within 3 hours of the next business hour cycle. If your negotiation is not accepted by the hotel, then INR 500 will be refunded back to you with the next 24 hours. In case, your negotiation is successful and the balance amount not paid, them the advance of INR 500 will be forfeited.</div>
                        </div>
                    }*@
                </div>
                   
            <!-- End  table -->


                </div>
        <!-- container div END bottom -->
                </div>

                    <div class="container margintop20">
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="tablebluebg">
                                    House Rules
                                </div>

                                <div style="background:#f2f2f2; padding:15px;">
                                    <div class=" table-responsive">
                                        <table class="table">

                                            <tbody>
                                                @*<tr>
                                                        <td><b>Check-In</b></td>
                                                        <td>:</td>
                                                        <td>From @Html.DisplayFor(m => m.sCheckInHH):@Html.DisplayFor(m => m.sCheckInMM)</td>
                                                    </tr>*@
                                                @{
                                                    if (!String.IsNullOrEmpty(Model.sCheckInMM))
                                                    {
                                                        <tr>
                                                            <td><b>Check-In</b></td>
                                                            <td>:</td>
                                                            <td>

                                                                @if (Model.b24HrsCheckIn == true)
                                                                {
                                                                    <text>
                                                                        24 hours Check-In is Available. Early Check-In is @if (Model.bEarlyCheckInChargeable == true)
                                                                        { <text>Chargeable</text> }
                                                                        else
                                                                        {<text>Not Chargeable</text>}
                                                                    </text>
                                                                }
                                                                else
                                                                {
                                                                    <text>
                                                                        From @Html.DisplayFor(m => m.sCheckInHH):@Html.DisplayFor(m => m.sCheckInMM). Early Check-In is @if (Model.bEarlyCheckInChargeable == true)
                                                                        { <text>Chargeable</text> }
                                                                        else
                                                                        {<text>Not Chargeable</text>}
                                                                    </text>
                                                                }
                                                            </td>

                                                        </tr>
                                                    }
                                                }
                                                @*<tr>
                                                        <td><b>Check-out</b></td>
                                                        <td>:	</td>
                                                        <td>Until @Html.DisplayFor(m => m.sCheckoutHH):@Html.DisplayFor(m => m.sCheckoutMM)</td>
                                                    </tr>*@
                                                @{
                                                    if (!String.IsNullOrEmpty(Model.sCheckoutMM))
                                                    {
                                                        <tr>
                                                            <td><b>Check-out</b></td>
                                                            <td>:	</td>
                                                            <td>
                                                                @if (Model.b24HrsCheckout == true)
                                                                {
                                                                    <text>
                                                                        24 hours Check-Out is Available. Late Check-Out is @if (Model.bEarlyCheckoutChargeable == true)
                                                                        { <text>Chargeable</text> }
                                                                        else
                                                                        {<text>Not Chargeable</text>}
                                                                    </text>
                                                                }
                                                                else
                                                                {
                                                                    <text>
                                                                        Until @Html.DisplayFor(m => m.sCheckoutHH):@Html.DisplayFor(m => m.sCheckoutMM). hrs @clsUtils.GetTimeType(Model.sCheckoutHH)Late Check-Out is @if (Model.bEarlyCheckoutChargeable == true)
                                                                        { <text>Chargeable</text> }
                                                                        else
                                                                        {<text>Not Chargeable</text>}
                                                                    </text>
                                                                }


                                                            </td>
                                                        </tr>
                                                    }
                                                }

                                                <tr>
                                                    <td><b>Cancellation</b></td>
                                                    <td>:	</td>
                                                    <td>Cancellation policies vary according to room rate and package.</td>
                                                </tr>

                                                <tr>
                                                    <td><b>Children and Extra Beds</b></td>
                                                    <td>:	</td>
                                                    <td colspan="2">
                                                        <ul class="mar-padd0">

                                                            <li>All children are welcome</li>
                                                            @if (Model.iComplimentaryStayAge != null)
                                                            {
                                                                <li> Children upto @Html.DisplayFor(m => m.iComplimentaryStayAge) years stay for free. Extra cot/ bed may be chargeable</li>
                                                            }

                                                            <li>Extrabed required for children from @Html.DisplayFor(m => m.iExtraBedRequiredFrom) years</li>
                                                            <li>
                                                                Extra child or an adult using an extra bed will be charged at @Model.Symbol
                                                                @{
                                                                    string ExPrice = clsUtils.ConvertNumberToCommaSeprated(Convert.ToDecimal(Model.dExtraBedCharges));
                                                                }

                                                                @ExPrice

                                                                excluding taxes.
                                                            </li>
                                                            <li>@Html.DisplayFor(m => m.iMinCheckInAge) years is Minimum age of check in</li>
                                                        </ul>
                                                    </td>
                                                </tr>



                                                <tr>
                                                    <td><b>Other Polices</b></td>
                                                    <td>:</td>
                                                    <td>
                                                        <ul class="mar-padd0">
                                                            @if (Model.bVisitorsAllowed == true)
                                                            {
                                                                <li>Visitors are allowed.</li>
                                                            }

                                                            @if (Model.bAlcoholAllowedOnsite == true)
                                                            {
                                                                <li>Alcohol allowed onsite</li>
                                                            }

                                                            @if (Model.bAlcoholServedOnsite == true)
                                                            {
                                                                <li>Alcohol Served onsite</li>
                                                            }

                                                            @if (Model.bPetsAllowed == true)
                                                            {
                                                                <li>Pets are not allowed.</li>
                                                            }

                                                            @if (Model.bPartiesAllowed == true)
                                                            {
                                                                <li>Stag/ bachelor and hen/ bachelorette parties are allowed.</li>
                                                            }
                                                        </ul>
                                                    </td>
                                                </tr>
                                                @{
                                                    if (Model.lstCreditCards != null)
                                                    {
                                                        if (Model.lstCreditCards.Count > 0)
                                                        {
                                                            <tr>
                                                                <td><b>Cards accepted at this property</b> </td>
                                                                <td>:</td>
                                                                <td>
                                                                    @foreach (var item in Model.lstCreditCards)
                                                                    {
                                                                        <img src="@item.sImg">
                                                                    }
                                                                </td>
                                                            </tr>
                                                        }
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
    <!-- container div END bottom -->
                    <div class="container margintop20 marginbottom10">
                        <div class="row">
                            <div class="col-xs-12">
                                <div class=" tablebluebg">
                                    OneFineRate Important Info
                                </div>

                                <div style="background:#f2f2f2; padding:15px;">
                                    <div class=" table-responsive table-bordered padding15 lightgrybg infopara">
                                        <ul class="bullets">

                                            <li>  Requests for bed types, early check in, late check out, smoking room etc cannot be guaranteed. These requests must be made directly to the hotel confirmed and are subject to availability.                                                                                                                                                            </li>
                                            <li> <strong> Reservation is guaranteed for arrival on the check-in date only. </strong> To avoid cancellation of your reservation due to a no show please alert the hotel xx days/ hours in advance to claim a refund.                                                                                                                                                        </li>
                                            <li>  The reservation holder must present a valid credit card at check-in.                                                                                                                                                                                                                                                                                   </li>
                                            <li>  According to government regulations, it is mandatory to present a valid Photo ID at check in by every person above the age of 18 staying at the hotel. A Drivers License, Voters Card, Passport are all acceptable as identity proof, however, please note PAN cards are not a valid ID. Without a valid ID no guest will be allowed to check in.      </li>
                                            <li>  The primary guest checking in to the hotel must be at least 18 years of age.                                                                                                                                                                                                                                                                           </li>
                                            <li>  The inclusion of an extra bed with a booking is facilitated with a folding cot or a mattress.                                                                                                                                                                                                                                                          </li>
                                            <li>  A booking cannot be cancelled on or after the check in date and time mentioned in the Hotel Confirmation Voucher.                                                                                                                                                                                                                                      </li>
                                            <li>  The hotel reserves the right of admission. Accommodation can be denied to guests posing as a ' couple' if suitable proof of identification is not presented at check-in. OneFineRate will not be responsible for any check-in denied by the hotel due to the aforesaid reason.                                                                         </li>
                                            <li>  The hotel reserves the right of admission for local residents. Accommodation can be denied to guests residing in the same city. OneFineRate will not be responsible for any check-in denied by the hotel due to the aforesaid reason.                                                                                                                  </li>
                                            <li>  All distances (Airport/Station etc.) are approximate and actual driving distances may vary based on the route taken.                                                                                                                                                                                                                                   </li>
                                            <li>  Hotels may charge a mandatory meal surcharge on festive periods e.g. Christmas, New Year's Eve etc... All additional charges (including mandatory meal surcharges) need to be cleared directly at the hotel.                                                                                                                                           </li>

                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div id="RoomDetails" class="modal fade" role="dialog">

                    </div>

                    <div class="modal fade" id="mapDivPopup">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                                    <h4 class="modal-title">@Model.HotelName</h4>
                                </div>
                                <div class="modal-body" id="popupMapDiv" style="height:450px;overflow:hidden;">

                                </div>
                                <div class="modal-footer">

                                </div>
                            </div>
                        </div>
                    </div>


                    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBA8k8_YKEbkfECgXpF6FKdMkMA1jS1qAQ"></script>
                    <script src="~/Scripts/Jquery.googleMapLebel.js"></script>
                    <script type="text/javascript">

        function OpenPopUp(propid, roomid) {
            //startSpinning();
            var url = '@Url.Action("RoomInfo", "OfferReview")?propid=' + propid + '&roomid=' + roomid;

            $("#RoomDetails").load(url,function(){
                //stopSpinning();
            });
            $('#RoomDetails').modal({
                show: 'true'
            });
        }

        var popupMap;


        var myLatlng = new google.maps.LatLng(@Model.dLatitude, @Model.dLongitude);

        var myOptions = {
            zoom: 17,
            center: myLatlng,
            zoomControl: true,
            clickableIcons: false
        };


        var mapLabel = new MapLabel({
            text: '@Model.HotelName',
            position: myLatlng,
            map: popupMap,
            fontSize: 20,
            fontColor:'#A52A2A',
            align: 'Left'
        });

        function initialize() {

            var map = new google.maps.Map(document.getElementById('googleMap'), myOptions);
            popupMap = new google.maps.Map(document.getElementById("popupMapDiv"),myOptions);

            var centerControlDiv = document.createElement('div');
            var centerControl = new CenterControl(centerControlDiv, map);

            centerControlDiv.index = 1;
            map.controls[google.maps.ControlPosition.TOP_CENTER].push(centerControlDiv);

            var marker = new google.maps.Marker({
                position: myLatlng
            });

            var marker2 = new google.maps.Marker({
                position: myLatlng
            });

            marker.setMap(map);

            mapLabel.set('position', myLatlng);

            marker2.bindTo('map', mapLabel);
            marker2.bindTo('position', mapLabel);
            marker2.setDraggable(false);
            marker2.setMap(popupMap);

        }

        google.maps.event.addDomListener(window, 'load', initialize);
        google.maps.event.addDomListener(window, "resize", resizingMap());

        function CenterControl(controlDiv, map) {

            // Set CSS for the control border.
            var controlUI = document.createElement('div');
            controlUI.style.backgroundColor = '#fff';
            controlUI.style.border = '2px solid #fff';
            controlUI.style.borderRadius = '3px';
            controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
            controlUI.style.cursor = 'pointer';
            controlUI.style.marginBottom = '0px';
            controlUI.style.textAlign = 'center';
            controlUI.title = 'Click to View larger Map';
            controlDiv.appendChild(controlUI);

            // Set CSS for the control interior.
            var controlText = document.createElement('div');
            controlText.style.color = '#337ab7';
            controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
            controlText.style.fontSize = '10px';
            controlText.style.lineHeight = '20px';
            controlText.style.paddingLeft = '5px';
            controlText.style.paddingRight = '5px';
            controlText.innerHTML = 'View larger Map';
            controlUI.appendChild(controlText);

            // Setup the click event listeners
            //  var url =   'https://www.google.com/maps/place/the+Ashoka/28.5983307,77.1931878,17z?hl=en-US';

            controlUI.addEventListener('click', function() {

                $('#mapDivPopup').modal({
                    show: 'true'
                });
            });
        }


        $('#mapDivPopup').on('show.bs.modal', function() {
            resizeMap();
        })

        function resizeMap() {
            if(typeof popupMap =="undefined") return;
            setTimeout( function(){resizingMap();} , 400);
        }

        function resizingMap() {
            if(typeof popupMap =="undefined") return;
            var center = popupMap.getCenter();
            google.maps.event.trigger(popupMap, "resize");
            popupMap.setCenter(center);
        }


                    </script>


