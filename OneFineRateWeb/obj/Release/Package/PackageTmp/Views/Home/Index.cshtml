@{
    ViewBag.Title = "Home Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .ui-autocomplete-loading {
        background: white url("images/ui-anim_basic_16x16.gif") right center no-repeat;
    }

    #city {
        width: 25em;
    }
</style>
<style>
    .tooltipnewcss {
        position: relative;
        margin: 0;
        padding: 0;
    }

    a.tooltipinformation {
        outline: none;
    }

        a.tooltipinformation strong {
            line-height: 30px;
        }

        a.tooltipinformation:hover {
            text-decoration: none;
        }

        a.tooltipinformation span {
            width: 100%;
            display: none;
            margin: 0;
            line-height: 15px;
            color: #000;
            font-size: 12px;
            padding: 10px;
            cursor: default;
            background: #FFF;
            border: 1px solid #bbbbbb;
            position: absolute;
            float: left;
            -webkit-border-radius: 3px;
            -moz-border-radius: 3px;
            border-radius: 3px;
        }

        a.tooltipinformation:hover span {
            display: inline;
            z-index: 9999 !important;
            color: #000;
            font-size: 12px;
            padding: 5px;
            text-align: left;
            cursor: default;
        }

    .ui-autocomplete {
        z-index: 9999 !important;
    }

    .ui-menu {
        width: 260px !important;
    }

    .ui-widget.ui-widget-content li {
        border: 0px !important;
    }

    div.ui-datepicker {
        font-size: 12px;
    }


    /*@@media(max-width:480px) {
        .ui-menu {
            width: 250px !important;
        }
    }*/
</style>
<style>
    .vedio_iframe {
        width: 100%;
        height: 327px;
    }

    .ui-helper-hidden-accessible {
        display: none;
    }

    .childli {
        float: left;
        width: 104px;
        margin-right: 14px;
        margin-top: 10px;
    }

    .showdata {
        padding: initial;
    }
</style>
<style>
    .ui-autocomplete-category {
        font-weight: bold;
        padding: .2em .4em;
        margin: .8em 0 .2em;
        line-height: 1.5;
    }

    .ui-menu .ui-menu-item {
        width: 220px;
        display: inline-block;
        clear: both;
    }

    .City {
        float: left;
        width: 220px;
    }

    .Area {
        float: left;
        width: 220px;
    }

    .Locality {
        float: left;
        width: 220px;
    }

    #divwhole {
        width: 290px !important;
        display: none;
        border: 1px solid #d1d1d1;
        background-color: #fff;
        position: absolute;
        top: 70px;
        right: 15%;
        overflow: auto;
    }
    /*.noofppltop{display:block; border:1px solid #d1d1d1; background-color:#fff; position:absolute; top:50px; right:10%;}*/
    #stickytypeheader {
        position: absolute;
        top: 373px;
        z-index: 99;
        width: 100%;
        background: rgba(0, 0, 0, 0); /*rgba(46, 44, 33, 0.3)*/
    }
    /*#stickbg{background: rgba(46, 44, 33, 0.9);  position:relative; width:100%;}*/
    .stickmargin {
        margin: 0px auto;
        padding-top: 32px;
        padding-bottom: 10px;
        border: 0px red solid;
    }

    .checkin {
        width: 16.77%;
    }

    .topbtn {
        width: 25%;
    }

    /*.width25 {
        width: 35% !important;
        padding: 0;
    }*/
    .mod {
        height: auto !important;
    }   

</style>
<script>
    $(function () {
        $('#divloc').addClass('width25');
        var stickyHeaderTop = 595;// $('#stickytypeheader').offset().top;

        var isMobile = CheckIfMobile();

        if (!isMobile) {

            $(window).scroll(function () {

                if ($(window).scrollTop() > stickyHeaderTop) {

                    $('#stickytypeheader').css({ 'position': 'fixed', 'top': '0px' });
                    $('#stickbg').css({ 'background': 'rgba(254, 203, 0, 1.0)' });
                    $('#divwhole').css({ 'border': '1px solid #d1d1d1', 'background-color': '#fff', 'position': 'absolute', 'top': '70px', 'right': '30%', 'max-height': '350px;', 'overflow': 'auto' });
                    $('#sticky').css('display', 'block');
                    $('#clsrmv').removeClass('col-md-offset-2 col-md-8');
                    $('#clsrmv').addClass('col-md-12');
                    $('#adltdiv').removeClass('col-md-3');
                    $('#adltdiv').addClass('col-md-2');
                    $('.checkin').css({ width: '11%' });
                    $('.topbtn').css({ width: '34%' });
                    $('#divloc').removeClass('width25');
                    $('#ScrollDiv').show();

                    //  $('.addheight').css({});
                } else {
                    $('#stickytypeheader').css({ 'position': 'absolute', 'top': '373px', 'border': '0px solid red', 'width': '100%' });
                    $('#stickbg').css({ 'background': 'rgba(46, 44, 33, 0)' });
                    $('#divwhole').css({ 'border': '1px solid #d1d1d1', 'background-color': '#fff', 'position': 'absolute', 'top': '75px', 'z-index': '9999', 'right': '15%', 'max-height': '350px;', 'overflow': 'auto' });
                    $('#sticky').css('display', 'none');
                    $('#clsrmv').removeClass('col-md-12');
                    $('#clsrmv').addClass('col-md-offset-2 col-md-8');
                    $('#adltdiv').removeClass('col-md-2');
                    $('#adltdiv').addClass('col-md-3');
                    $('.checkin').css({ width: '16.77%' });
                    $('.topbtn').css({ width: '25%' });
                    $('#ScrollDiv').hide();
                    $('#divloc').addClass('width25');
                    // $('.addheight').css({ 'height': 'auto', 'overflow': 'none' });
                }
            });
        }

    });
    function CheckIfMobile() {

        var isMobile = false; //initiate as false
        // device detection
        if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)
            || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0, 4))) {
            isMobile = true;
        }

        //if (window.navigator.platform == "iPhone" || window.navigator.platform == "iPod" || window.navigator.platform == "iPad" || window.navigator.platform == "Android" || window.navigator.platform == "BlackBerry") {
        //    console.log(window.navigator.platform);
        //    return false;
        //}
        return isMobile;
    }

</script>


<link href="~/css/homehotelbox.css" rel="stylesheet" />
<script src="~/Scripts/UserScripts/moment.js"></script>
<link href="~/css/jquery-ui-1.8.1.custom.css" rel="stylesheet" />
@System.Web.Optimization.Scripts.Render("~/bundles/autofill")

<div class="main-wrapper">

    @*<button class="btn btn-success" data-toggle="modal" data-target="#hidden">Message</button>
        <div class="modal fade" id="hidden" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body">
                        <p class="text-center"><a href="login.php?location=$location" class="follow_btn_a">You must login to send a message. Click to login</a></p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>*@

    <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
        <!-- Indicators -->
        <!-- Wrapper for slides -->
        <div class="carousel-inner" role="listbox">
            @{
                int count = 0;
                foreach (var item in ((List<OneFineRateBLL.Entities.etblBannerM>)ViewBag.banners).Where(item => item.sBannerType == "Home"))
                {
                    if (count == 0)
                    {
                        // style="cursor:pointer" onclick="window.open('@item.sLinkId');
                        <div class="item active">
                            <div style="background-image:url(@(System.Configuration.ConfigurationManager.AppSettings["BlobUrl"].ToString() + item.sImgUrl));background-repeat no-repeat; background-size:cover; min-height:450px;">

                                <div class="carousel-caption">
                                    <a href="@item.sLinkId" target="_blank">@Html.Raw(item.sDescription)</a>
                                </div>
                            </div>
                        </div>
                        count++;
                    }
                    else
                    {
                        // style="cursor:pointer" onclick="window.open('@item.sLinkId');
                        <div class="item">
                            <div style="background-image:url(@(System.Configuration.ConfigurationManager.AppSettings["BlobUrl"].ToString() + item.sImgUrl));background-repeat: no-repeat; background-size:cover; min-height:450px;">

                                <div class="carousel-caption">
                                    <a href="@item.sLinkId" target="_blank">@Html.Raw(item.sDescription)</a>
                                </div>
                            </div>
                        </div>
                        count++;
                    }
                }
            }


            @using (Html.BeginForm("Index", "Search", FormMethod.Post, new { id = "homePageSearchBar" }))
            {
                @Html.Hidden("hdnJson")

                <div id="stickytypeheader">
                    <div id="stickbg">
                        <div class="stickmargin">
                            <div class="container container-table">
                                <div class="row vertical-center-row">
                                    <div class="col-md-8 col-md-offset-2" id="clsrmv">
                                        @Html.Hidden("hdnSelectedLocalityID")
                                        @Html.Hidden("hdnSelectedType")
                                        <div id="divloc" class="col-md-2 col-xs-12">
                                            <input id="txtlocname" type="text" name="place" placeholder="Where are you going?" class="form-control autosuggest">
                                        </div>
                                        <div class="col-md-2 col-xs-12 checkin">
                                            <input type="text" id="txtstayfrom" name="dcheckin" placeholder="Check In" data-language='en' class="form-control datepicker-here width110a">
                                        </div>
                                        <div class="col-md-2 col-xs-12 checkin">
                                            <input type="text" id="txtstayto" name="dcheckout" placeholder="Check Out" data-language='en' class="form-control datepicker-here width110a">
                                        </div>

                                        <div class="col-md-3 col-xs-12" id="adltdiv">
                                            <div id="txttotalcount" class="form-control ">2 Guests in 1 Room</div>
                                            <div id="divwhole" class="addheight">
                                                <i class="sprite-booking-engine ico-be-sub-arrow"></i>
                                                <div id="roomContainerDiv">
                                                    <div class="rooms">
                                                        <div class='col-md-12 col-xs-12  pull-left'>
                                                            <h5><strong>Room1:</strong></h5>
                                                        </div>
                                                        <div class='col-md-6 col-xs-6'>
                                                            <h5><strong>Adult</strong></h5>
                                                            <h6>Above 12 years</h6>

                                                            <div class='input-group width110'>
                                                                <input id="adult1" class="form-control adult1" itype="adult1" type="number" roomno="1" readonly="readonly" value="2" min="1" max="6" />
                                                            </div>
                                                        </div>
                                                        <div class='col-md-6 col-xs-6'>
                                                            <h5><strong>Children</strong></h5>
                                                            <h6>Below 12 years</h6>
                                                            <div class='input-group width110'>
                                                                <input id="children1" class="form-control children1" readonly="readonly" roomno="1" itype="children1" type="number" value="0" min="0" max="6" />

                                                            </div>
                                                        </div>
                                                        <div class='col-md-12 col-xs-12' id="divChildAge1" style="display:none;">

                                                            <h5><strong>Age of Childen</strong></h5>
                                                            <ul style="list-style:none; padding:0; margin:0; " id="ulchilds1"></ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class='col-md-12 col-xs-12 margintop5'>
                                                    <a id="btnaddroom" href='javascript:void(0);' onclick="AddRooms();">Add a room</a>
                                                    <span id="sppipe" style="display:none;">|</span>
                                                    <a id="btnremoveroom" href='javascript:void(0);' style="display:none;" onclick="RemoveRoom();">Remove this room</a>
                                                    <hr>
                                                    <div onclick="FetchRoomDetails();" class='btn btn-primary margintop5 marginbottom10 col-md-12'>Done</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4 topbtn" id="ScrollDiv" style="display:none;">
                                            <div class="pull-left">
                                                <button data-button_name="bid" rel="popover" class="btn btn-bannerbtn leftmargin0 btnbuy ">BID</button>
                                                <span class="margintop-40">
                                                    <a href="javascript:void(0);" class="card-btn" data-toggle="popover" title="" data-trigger="hover" data-content="Get a steal of a deal at OneFineRate, when you place a blind bid for your choice of star hotel category and location.">
                                                        <img src="@Url.Content("~/images/info.png") ">
                                                    </a>
                                                </span>
                                                <button data-button_name="negotiate" rel="popover" class="btn btn-bannerbtn leftmargin0 btnbuy ">NEGOTIATE</button>
                                                <span class="margintop-40">
                                                    <a href="javascript:void(0);" class="card-btn" data-toggle="popover" title="" data-trigger="hover" data-content="Let us know the price you wish to pay for your preferred room at your choice of hotel. Let OneFineRate negotiate for you!">
                                                        <img src="@Url.Content("~/images/info.png")">
                                                    </a>
                                                </span>
                                                <button data-button_name="buy" rel="popover" type="submit" class="btn btn-bannerbtn leftmargin0 btnbuy ">BUY</button>
                                                <span class="margintop-40">
                                                    <a href="javascript:void(0);" class="card-btn" data-toggle="popover" title="" data-trigger="hover" data-content="Book any room at OneFineRate offered by the hotel.">
                                                        <img src="@Url.Content("~/images/info.png")">
                                                    </a>
                                                </span>
                                                <button data-button_name="corporate" rel="popover" type="submit" class="btn btn-bannerbtn leftmargin0 btnCorporate ">CORPORATE</button>
                                                <span class="margintop-40">
                                                    <a href="javascript:void(0);" class="card-btn" data-placement="bottom" data-toggle="popover" title="" data-trigger="hover" data-content="Get best deals on your corporate & leisure stays. Login with your corporate email address to check your company’s eligibility for OFR corporate rates & OFR will find the best rates for you.">
                                                        <img src="@Url.Content("~/images/info.png")">
                                                    </a>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>

    </div>

    <div class="yellowbg">
        <div class="form-inline text-center" id="btnplaceholder">
            <button data-button_name="bid" class=" btn btn-bannerbtn btn-lg  marginleft15 btnbuy">BID</button>
            <span class="margintop-40">
                <a href="javascript:void(0);" class="card-btn" rel="popover" data-id="iBid" title="" data-content="Get a steal of a deal at OneFineRate, when you place a blind bid for your choice of star hotel category and location.">
                    <img src="@Url.Content("~/images/info.png")">
                </a>
            </span>
            <button data-button_name="negotiate" rel="popover" class="btn btn-bannerbtn btn-lg marginleft15 btnbuy">NEGOTIATE</button>
            <span class="margintop-40">
                <a href="javascript:void(0);" class="card-btn" title="" data-trigger="hover" data-content="Let us know the price you wish to pay for your preffered room at your choice of hotel. Let OneFineRate negotiate for you!">
                    <img src="@Url.Content("~/images/info.png")">
                </a>
            </span>
            <button data-button_name="buy" rel="popover" class="btn btn-bannerbtn btn-lg  marginleft15 btnbuy">BUY</button>
            <span class="margintop-40">
                <a href="javascript:void(0);" title="" class="card-btn" data-content="Book any room at OneFineRate offered by the hotel.">
                    <img src="@Url.Content("~/images/info.png")">
                </a>
            </span>
            <button rel="popover" class="btn btn-bannerbtn btn-lg marginleft15 btnCorporate">CORPORATE</button>
            <span class="margintop-40">
                <a href="javascript:void(0);" title="" class="card-btn" data-content="Get best deals on your corporate & leisure stays. Login with your corporate email address to check your company’s eligibility for OFR corporate rates & OFR will find the best rates for you.">
                    <img src="@Url.Content("~/images/info.png")">
                </a>
            </span>
        </div>
    </div>

</div>
<script src="~/js/bootstrap-popover-extra-placements.js"></script>

<div class="container ">
    <div class="row" style="border:0px solid red;">
        <!--video section-->
        <div class="col-md-6 ">
            <div class=" blueheadingbg"><img src="@Url.Content("~/images/briefcase_icon.png")" /> HOW TO BID, NEGOTIATE OR BUY AT OFR</div>
            @*<div class="blackbgtransparent"><img src="@Url.Content("~/images/right-arrow.png")"> LEARN HOW TO GET THE BEST DEAL ON OFR</div>*@
            <div class="whitebody">
                <div id="videoLayoutBuy">
                    <img src="@ViewBag.urlImg" onclick="playVideo();">
                </div>
                <div id="divvideobuy" style="display:none;">

                </div>

            </div>

        </div>
        <!--video section end-->
        <!--Deal section-->
        <div class="col-md-6  ">
            <div class="blueheadingbg"><img src="@Url.Content("~/images/savings_icon.png")"> RECENT SAVINGS AT OFR</div>
            <div class="whitebody">
                <div class="table-responsive marginbottom-20">
                    <table class="table table-condensed text-center whitetextcolor">
                        <thead class="recntsavthead">
                            <tr>
                                <th class="paddingleft10" style="text-align:left !important; width:30%;">City</th>
                                <th style="width:10%; text-align:left !important;">Star</th>
                                <th style="width:20%;">Best Rate</th>
                                <th style="width:20%;">OFR Rate</th>
                                <th style="width:20%;">Saving</th>
                            </tr>
                        </thead>
                        <tbody id="tblSavings"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<!--second row end-->
<!--third row start margintop74-->
<div class="container margintop40">
    <div class="row">
        <div class="col-md-12">
            <div class="blueheadingbg1 text-center">OFR PREFERED HOTELS</div>
        </div>
    </div>
</div>


<div class="container margintop40 homepnlbg">
    <div class="row" style="border:0px solid red;">
        @{
            string[] ids1 = { "A1", "A2" };
            foreach (var item in ((List<OneFineRateBLL.Entities.ePromotionalHotels>)ViewBag.PromotionalHotels).Where(item => ids1.Contains(item.sPosition)))
            {
                var roomid = OneFineRateAppUtil.clsUtils.Encode(item.iPropId.ToString());
                var url = "OfferReview" + "?Id=" + roomid;
                <a href="@url">
                    <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                        <div class="property-box propertySearch-box boxshadow">
                            <div class="img-con">

                                <img src="@item.sImageUrl">

                                <span class="hoteltitles">@Html.Raw(item.sHotelName.Length > 22 ? item.sHotelName.Substring(0, 22) + "..." : item.sHotelName)</span>
                            </div>
                            <div class="caption">
                                <div class="row" style="padding-left:5px;">
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        @switch (item.iStarCategoryId)
                                        {
                                            case 1:
                                                <img src="/images/inner-star1.png" class="imgheight10" alt="">
                                                break;
                                            case 2:
                                            <img src="/images/inner-star2.png" class="imgheight10" alt="">
                                                break;
                                            case 3:
                                            <img src="/images/inner-star3.png" class="imgheight10" alt="">
                                                break;
                                            case 4:
                                            <img src="/images/inner-star4.png" class="imgheight10" alt="">
                                                break;
                                            case 5:
                                            <img src="/images/inner-star5.png" class="imgheight10" alt="">
                                                break;
                                        }
                                        <div class="font14 blacktext">@item.sCity</div>
                                    </div>
                                    <div class="col-md-6  col-sm-6 col-xs-6">

                                        <h4 class="blueboldtextsmall pull-right" style="padding-right:5px;"> @item.sPrice</h4>
                                    </div>
                                </div>
                                <hr style="width:95%;">

                                <div class="col-md-12 ">
                                    <p class="lineheight24 first2">@Html.Raw(item.sDescription.Length > 180 ? item.sDescription.Substring(0, 180) + "..." : item.sDescription)</p>
                                </div>

                            </div>
                        </div>
                    </div>
                </a>
            }
        }


        <div class="col-md-6 col-xs-12   ">
            @{
                string[] ids2 = { "A3", "A4" };
                foreach (var item in ((List<OneFineRateBLL.Entities.ePromotionalHotels>)ViewBag.PromotionalHotels).Where(item => ids2.Contains(item.sPosition)))
                {
                    var roomid = OneFineRateAppUtil.clsUtils.Encode(item.iPropId.ToString());
                    var url = "OfferReview" + "?Id=" + roomid;
                    <a href="@url">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 property-box1 propertySearch-box1 boxshadow" style="padding-left:0; padding-right:0;">
                            <div class="">

                                <div class="col-md-6 img-con1">

                                    <img src="@item.sImageUrl" />
                                    <span class="hoteltitles">@Html.Raw(item.sHotelName.Length > 22 ? item.sHotelName.Substring(0, 22) + "..." : item.sHotelName)</span>
                                </div>

                                <div class="col-md-6 col-sm-12 col-xs-12">
                                    <div class="captionddd">
                                        <div class="row">
                                            <div class="col-md-6 col-sm-6  col-xs-6">
                                                @switch (item.iStarCategoryId)
                                                {
                                                    case 1:
                                                        <img src="/images/inner-star1.png" class="imgheight10" alt="">
                                                        break;
                                                    case 2:
                                                    <img src="/images/inner-star2.png" class="imgheight10" alt="">
                                                        break;
                                                    case 3:
                                                    <img src="/images/inner-star3.png" class="imgheight10" alt="">
                                                        break;
                                                    case 4:
                                                    <img src="/images/inner-star4.png" class="imgheight10" alt="">
                                                        break;
                                                    case 5:
                                                    <img src="/images/inner-star5.png" class="imgheight10" alt="">
                                                        break;
                                                }
                                                <div class="font14 blacktext">@item.sCity</div>
                                            </div>
                                            <div class="col-md-6  col-sm-6 col-xs-6 ">
                                                <h4 class="blueboldtextsmall pull-right">@item.sPrice</h4>
                                            </div>
                                        </div>

                                        <hr>
                                        <div class="row ">
                                            <div class="col-md-12 ">
                                                <p class="lineheight24 next2">@Html.Raw(item.sDescription.Length > 180 ? item.sDescription.Substring(0, 180) + "..." : item.sDescription)</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </a>
                }
            }

        </div>
    </div>
    <!--third row end-->
    <!--4th-row start margintop74-->
    <div class="row " style="border:0px solid red;">
        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12" style="border:0px solid red;">

            @{
                string[] ids3 = { "B1", "B2" };
                foreach (var item in ((List<OneFineRateBLL.Entities.ePromotionalHotels>)ViewBag.PromotionalHotels).Where(item => ids3.Contains(item.sPosition)))
                {
                    var roomid = OneFineRateAppUtil.clsUtils.Encode(item.iPropId.ToString());
                    var url = "OfferReview" + "?Id=" + roomid;
                    <a href="@url">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12  property-box1 propertySearch-box1 boxshadow marginbottom10" style="padding-left:0; padding-right:0;">

                            <div class="col-md-6 img-con1">
                                <img src="@item.sImageUrl">
                                <span class="hoteltitles">@Html.Raw(item.sHotelName.Length > 22 ? item.sHotelName.Substring(0, 22) : item.sHotelName)</span>
                            </div>

                            <div class="col-md-6 col-sm-12 col-xs-12">
                                <div class="caption">
                                    <div class="row">
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            @switch (item.iStarCategoryId)
                                            {
                                                case 1:
                                                    <img src="/images/inner-star1.png" class="imgheight10" alt="">
                                                    break;
                                                case 2:
                                                <img src="/images/inner-star2.png" class="imgheight10" alt="">
                                                    break;
                                                case 3:
                                                <img src="/images/inner-star3.png" class="imgheight10" alt="">
                                                    break;
                                                case 4:
                                                <img src="/images/inner-star4.png" class="imgheight10" alt="">
                                                    break;
                                                case 5:
                                                <img src="/images/inner-star5.png" class="imgheight10" alt="">
                                                    break;
                                            }
                                            <div class="font14 blacktext">@item.sCity</div>
                                        </div>
                                        <div class="col-md-6  col-sm-6 col-xs-6 ">
                                            <h4 class="blueboldtextsmall pull-right">@item.sPrice</h4>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row ">
                                        <div class="col-md-12 ">
                                            <p class="lineheight24 next2">@Html.Raw(item.sDescription.Length > 180 ? item.sDescription.Substring(0, 180) + "..." : item.sDescription)</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </a>
                }
            }

        </div>

        @{
            string[] ids4 = { "B3", "B4" };
            foreach (var item in ((List<OneFineRateBLL.Entities.ePromotionalHotels>)ViewBag.PromotionalHotels).Where(item => ids4.Contains(item.sPosition)))
            {
                var roomid = OneFineRateAppUtil.clsUtils.Encode(item.iPropId.ToString());
                var url = "OfferReview" + "?Id=" + roomid;
                <a href="@url">
                    <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 " style="border:0px solid red;">
                        <div class="property-box propertySearch-box boxshadow">
                            <div class="img-con">
                                <img src="@item.sImageUrl">
                                <span class="hoteltitles">@Html.Raw(item.sHotelName.Length > 22 ? item.sHotelName.Substring(0, 22) : item.sHotelName)</span>
                            </div>
                            <div class="caption">
                                <div class="row" style="padding-left:5px;">
                                    <div class="col-md-6 col-sm-6  col-xs-6">
                                        @switch (item.iStarCategoryId)
                                        {
                                            case 1:
                                                <img src="/images/inner-star1.png" class="imgheight10" alt="">
                                                break;
                                            case 2:
                                            <img src="/images/inner-star2.png" class="imgheight10" alt="">
                                                break;
                                            case 3:
                                            <img src="/images/inner-star3.png" class="imgheight10" alt="">
                                                break;
                                            case 4:
                                            <img src="/images/inner-star4.png" class="imgheight10" alt="">
                                                break;
                                            case 5:
                                            <img src="/images/inner-star5.png" class="imgheight10" alt="">
                                                break;
                                        }
                                        <div class="font14 blacktext">@item.sCity</div>
                                    </div>
                                    <div class="col-md-6  col-sm-6 col-xs-6 ">
                                        <h4 class="blueboldtextsmall pull-right" style="padding-right:5px;">@item.sPrice</h4>
                                    </div>
                                </div>
                                <hr style="width:95%;">

                                <div class="col-md-12 margin5">
                                    <p class="lineheight24 first2">@Html.Raw(item.sDescription.Length > 180 ? item.sDescription.Substring(0, 180) + "..." : item.sDescription)</p>
                                </div>

                            </div>
                        </div>
                    </div>
                </a>
            }
        }

    </div>

</div>

<!--5th-row start-->
@foreach (var item in ((List<OneFineRateBLL.Entities.etblBannerM>)ViewBag.banners).Where(item => item.sBannerType == "Page Bottom"))
{

    if (item.sLinkId != null || item.sLinkId != "..//")
    {
        <div onclick="CallUrl('@item.sLinkId');" style="cursor: pointer !important;" class="container-wrapper margintop40 marginbottom20  ">
            <img src="@(System.Configuration.ConfigurationManager.AppSettings["BlobUrl"].ToString() + item.sImgUrl)" class="img-responsive text-center">

        </div>
    }
    else
    {
        <div class="container-wrapper margintop40 marginbottom20">
            <img src="@(System.Configuration.ConfigurationManager.AppSettings["BlobUrl"].ToString() + item.sImgUrl)" class="img-responsive">

        </div>
    }

}

<script src="~/js/bootstrap-number-input.js"></script>


<script type="text/javascript">

    var AllRecentSavings = '';
    var PageNo = 0;
    var Index = 1;
    function isOdd(num) { return num % 2; }
    var TopBannerData = [];
    var CCount = 0;
    var TotalCount = 0;
    var interval = '';

    //for cookies intialization
    var srchdetails;
    var pro = [];

    function CallUrl(url) {
        if (url != "") {
            var link = $('<a href="' + url + '" />');
            link.attr('target', '_blank');
            window.open(link.attr('href'));
        }
    }

    //for you tube video play
    function playVideo() {
        $('#videoLayoutBuy').attr('style', 'display:none;');
        $("#divvideobuy").show();
        $("#divvideobuy").html('<iframe src="@ViewBag.url"  frameborder="0" allowfullscreen="true" width="100%" height="360" style="z-index:999;">').css('background', 'none');
    }


    function GetAllRecentSavings() {
        var values = { Id: $('#hdnSelectedLocalityID').val(), Ctype: $('#hdnSelectedType').val(), Index: Index };

        AjaxCallWithDataMVC_Async("@Url.Action("GetSavings")", values, function (data) {

            AllRecentSavings = JSON.parse(data);

            BindRecentSavings('1');
        });
    }

    //Bind Recent Saving On Home Page
    function BindRecentSavings(count) {

        var Data = '';
        var NewPageNo = PageNo + 10;
        Data = AllRecentSavings.slice(PageNo, NewPageNo);
        PageNo += 10;
        if (Data.length > 0) {

            var myval = '', ICount = 0;
            var basediv = $('#tblSavings');
            basediv.empty();
            $(Data).each(function (i, result) {
                if (isOdd(count)) {
                    if (isOdd(ICount))
                        myval += '<tr class="greydarkbg">';
                    else
                        myval += '<tr class="greylightbgtable">';
                }
                else {
                    if (isOdd(ICount))
                        myval += '<tr class="greydarkbg1">';
                    else
                        myval += '<tr class="greylightbgtable1">';
                }
                myval += '<td  style="text-align:left" class="paddingleft10">' + result.sCity + '</td>';
                switch (result.iStar) {
                    case 1:
                        myval += '<td><img src="/images/inner-star1.png" class="imgheight10"></td>';
                        break;
                    case 2:
                        myval += '<td><img src="/images/inner-star2.png" class="imgheight10"></td>';
                        break;
                    case 3:
                        myval += '<td><img src="/images/inner-star3.png" class="imgheight10"></td>';
                        break;
                    case 4:
                        myval += '<td><img src="/images/inner-star4.png" class="imgheight10"></td>';
                        break;
                    case 5:
                        myval += '<td><img src="/images/inner-star5.png" class="imgheight10"></td>';
                        break;
                }
                myval += '<td class="font14 strikedfont">' + result.sSymbol + ' ' + result.dActualAmt + '</td>';
                myval += '<td class="font17 ">' + result.sSymbol + ' ' + result.dDiscountedAmt + '</td>';
                if (isOdd(count)) {
                    if (isOdd(ICount))
                        myval += '<td class="font17 greendarkbg">' + result.Percentage + '</td>';
                    else
                        myval += '<td class="font17 greenlightbg">' + result.Percentage + '</td>';
                }
                else {
                    if (isOdd(ICount))
                        myval += '<td class="font17 greendarkbg1">' + result.Percentage + '</td>';
                    else
                        myval += '<td class="font17 greenlightbg1">' + result.Percentage + '</td>';
                }
                myval += '</tr>';
                ICount++;
            });
            basediv.html(myval);
            return false;
        }
    }

    //Fetch Banner Data that has to be bind on top of the page
    function FetchBannerData() {
        var jsonData = '@Html.Raw(ViewBag.TopBannerData)';
        if (jsonData != "") {
            var jdata = jsonData.trim(' ');
            TopBannerData = JSON.parse(jdata);
            BindTopBanners(TopBannerData);
            TotalCount = TopBannerData.length;
        }
    }

    //Set intervals for top banner data
    function BindTopBanners(TopBannerData) {
        if (interval != undefined)
            clearInterval(interval);
        if (TopBannerData.length > 0) {
            $(TopBannerData).each(function (i, result) {
                if (CCount == i) {
                    CCount++;
                    BindData(result);
                    interval = setInterval(function () {
                        BindTopBanners(TopBannerData)
                    }, 10000);
                    if (TotalCount == CCount) {
                        CCount = 0;
                    }
                    return false;

                }
            });
        }
    }

    //Bind top banner dynamically
    function BindData(result) {
        var myval = ''
        var basediv = $('#divtopbanners');
        basediv.empty();
        myval += '<a target="_blank" style="color:white;" href="' + result.sLinkId + '">';
        myval += '<div class="container_wrap banner credits">';
        myval += result.sDescription;
        myval += '<div class="pull-right"><span class="lineheight35"><a style="cursor:pointer;" onclick="CloseBanner();"><i class="fa fa-times-circle  whitetext"></i></a></span></div>';
        myval += '</div></a>';
        basediv.html(myval);

    }

    //close top banner on click
    function CloseBanner() {
        clearInterval(interval);
        $('#divtopbanners').empty();
    }

    $(document).ready(function () {

        $('.bbuy').click(function () {

            $('#divbuy').modal({
                show: 'true'
            });
        });

        $('.bbid').click(function () {

            $('#divbid').modal({
                show: 'true'
            });
        });

        $('.bnego').click(function () {
            $('#divnego').modal({
                show: 'true'
            });

        });

        var d = new Date();
        var backdate = false;
        //fetch current datetime
        //if Data present in cookie, then bind search filters
        srchdetails = $.cookie('srchdetails');
        if (srchdetails) {
            var cdate = '', a = '';
            srchdetails = JSON.parse(srchdetails);
            var curr_date = d.getDate();
            var curr_month = d.getMonth() + 1;
            var curr_year = d.getFullYear();
            if (curr_date < 10) {
                curr_date = '0' + curr_date
            }
            if (curr_month < 10) {
                curr_month = '0' + curr_month
            }
            var TodayDate = curr_date + '/' + curr_month + '/' + curr_year;
            a = srchdetails.sCheckIn.split('/');
            var dcheckin = a[1] + '/' + a[0] + '/' + a[2];
            if (new Date(TodayDate) > new Date(srchdetails.sCheckIn)) //check check in date is less that current date
            {
                backdate = true;
                $("#txtstayfrom").val(TodayDate);
            }
            else {
                $("#txtstayfrom").val(srchdetails.sCheckIn);
            }

            a = srchdetails.sCheckOut.split('/');
            var dcheckout = a[1] + '/' + a[0] + '/' + a[2];
            if (backdate)  //if checkin date is older than current date then change check oud date to +1
            {
                TodayDate = curr_month + '/' + curr_date + '/' + curr_year;
                var newdate = new Date(TodayDate);
                newdate.setDate(newdate.getDate() + 1);
                var dd = newdate.getDate();
                var mm = newdate.getMonth() + 1;
                var y = newdate.getFullYear();
                if (dd < 10) {
                    dd = '0' + dd
                }
                if (mm < 10) {
                    mm = '0' + mm
                }
                var chekoutDate = dd + '/' + mm + '/' + y;
                $("#txtstayto").val(chekoutDate);
                $("#txtstayto").datepicker("option", "minDate", chekoutDate);

            }
            else {
                if (new Date(TodayDate) > new Date(srchdetails.sCheckOut)) //check check out date is less that current date
                {
                    TodayDate = curr_month + '/' + curr_date + '/' + curr_year;
                    var newdate = new Date(TodayDate);
                    newdate.setDate(newdate.getDate() + 1);
                    var dd = newdate.getDate();
                    var mm = newdate.getMonth() + 1;
                    var y = newdate.getFullYear();
                    if (dd < 10) {
                        dd = '0' + dd
                    }
                    if (mm < 10) {
                        mm = '0' + mm
                    }
                    var chekoutDate = dd + '/' + mm + '/' + y;
                    $("#txtstayto").val(chekoutDate);
                }
                else {
                    $("#txtstayto").val(srchdetails.sCheckOut);

                }
            }

            $('#hdnSelectedLocalityID').val(srchdetails.cid);
            $('#hdnSelectedType').val(srchdetails.ctype);
            $('#txtlocname').val(srchdetails.cname);

            var roomdata = JSON.parse(srchdetails.sRoomData);
            if (roomdata != '') {
                BindRoomData(roomdata);
            }
        }


        GetAllRecentSavings();
        FetchBannerData();

        //Set intervals to bind recent savings on home page
        setInterval(function () {
            if (Index == 32) {
                Index = 0;
                PageNo = 0;
            }

            Index++;
            BindRecentSavings(Index);
        }, 2000);


        /*****************show/hide sticky*********************/
        var scrollTop = $(this).scrollTop();
        $('.yellowbg').each(function () {
            var topDistance = $(this).offset().top;
            if ((topDistance + 0) < scrollTop) {
                $("#sticky1").css({ "display": "block" });
            } else {
                $("#sticky1").css({ "display": "none" });

            }
        });
        /*****************show/hide sticky end*********************/

        //bind autocomplete event on locality,city and macro area textbox on load
        $(".autosuggest").catcomplete({
            delay: 0,
            source: function (request, response) {
                //response([{ label: "", loading: true }]);
                $.ajax({
                    url: "/Home/GetSearchData",
                    contentType: "application/json; charset=utf-8",
                    data: { txt: request.term },
                    dataType: "json",
                    type: "GET",
                    async: false,
                    success: function (data) {

                        $('#hdnSelectedLocalityID').val('');
                        $('#hdnSelectedType').val('');
                        if (!data.length) {

                            var result = [
                             {
                                 value: response.term,
                                 category: "No Matches Found"
                             }
                            ];
                            response(result);
                        }
                        else {
                            response($.map(data, function (item) {
                                return {
                                    label: item.label,
                                    category: item.category,
                                    value: item.Id
                                }
                            }));
                        }
                    }
                });
            },
            minLength: 3,
            //autoFocus: true,
            select: function (event, ui) {
                //Set autocomplete element to display the label
                $(".autosuggest").val(ui.item.label);
                $('#hdnSelectedLocalityID').val(ui.item.value.trim());
                $('#hdnSelectedType').val(ui.item.category);
                event.preventDefault();
                if ($('#txtstayfrom').val() == undefined || $('#txtstayfrom').val() == "") {
                    $('#txtstayfrom').focus();
                }
            },
            focus: function (event, ui) {
                event.preventDefault();
                //  $(".autosuggest").val(ui.item.label);
                return false;
            },
            //open: function (event) {
            //    $('.ui-autocomplete').css('height', 'auto');
            //    var $input = $(event.target),
            //        inputTop = $input.offset().top,
            //        inputHeight = $input.height(),
            //        autocompleteHeight = $('.ui-autocomplete').height(),
            //        windowHeight = $(window).height();

            //    if ((inputHeight + inputTop + autocompleteHeight) > windowHeight) {
            //        //$('.ui-autocomplete').css('height', (windowHeight - inputHeight - inputTop - 20) + 'px');
            //        $('.ui-autocomplete').css('height',  '320px');
            //    }
            //}
        });


        //Click event of BUY button on Home Page
        $('.btnbuy').click(function (e) {

            e.preventDefault();

            var buttonName = $(this).data('button_name');

            if ($('#hdnSelectedLocalityID').val() == "" || $('#txtlocname').val().trim() == "") {
                toastr.warning('Please select the Destination City.');
                return false;
            }
            if ($('#txtstayfrom').val() == "") {
                toastr.warning('Please select your Check In date.');
                return false;
            }
            if ($('#txtstayto').val() == "") {
                toastr.warning('Please select your Check Out date.');
                return false;
            }

            FetchRoomDetails();

            if (buttonName == "negotiate") {
                var isNegoValid = FetchRoomDetails();   //Check for more than 3 room for a valid negotiation
                if (isNegoValid == false) {
                    toastr.warning('Negotiation not allowed on more than 3 rooms.');
                    return false;
                }
            }
            if ($("#hdnJson").val() == "") {
                toastr.warning('Please select rooms.');
                return false;
            }

            var values = { cid: $('#hdnSelectedLocalityID').val().trim(), ctype: $('#hdnSelectedType').val(), cname: $('#txtlocname').val(), sCheckIn: $('#txtstayfrom').val(), sCheckOut: $('#txtstayto').val(), sRoomData: $("#hdnJson").val(), totalGuestCount: $('#txttotalcount').html(), sRequestType: buttonName };

            $.removeCookie('srchdetails');
            pro = [];
            pro.push(JSON.stringify(values));
            $.cookie("srchdetails", pro, { expires: 2, path: '/' });

            if (EnsureCheckInCheckOut()) {
                if (buttonName == 'bid') {

                    var biddingInformationForGA = 'Place : ' + values.cname + ', Checkin : ' + values.sCheckIn + ', Checkout : ' + values.sCheckOut;

                    var completeInfo = 'IP Address :' + ipAddress + ', Place Details : ' + placeDetail + ', Url : ' + window.location.href + 'User Bid for :' + biddingInformationForGA;

                    ga('send', {
                        hitType: 'event',
                        eventCategory: 'Bid Search',
                        eventAction: completeInfo,
                        eventLabel: 'Page View'
                    });

                    //window.open('@Url.Action("Index", "Bidding")?cid=' + values.cid + '&ctype=' + values.ctype + '&cname=' + values.cname + '&sCheckIn=' + values.sCheckIn + '&sCheckOut=' + values.sCheckOut + '&sRoomData=' + values.sRoomData + '&sRequestType=' + values.sRequestType);
                    window.location.href = '@Url.Action("Index", "Bidding")?cid=' + values.cid + '&ctype=' + values.ctype + '&cname=' + values.cname + '&sCheckIn=' + values.sCheckIn + '&sCheckOut=' + values.sCheckOut + '&sRoomData=' + values.sRoomData + '&sRequestType=' + values.sRequestType;

                }
                else {

                    var searchInformationForGA = 'Place : ' + values.cname + ', Checkin : ' + values.sCheckIn + ', Checkout : ' + values.sCheckOut;

                    var completeInfo = 'IP Address :' + ipAddress + ', Place Details : ' + placeDetail + ', Url : ' + window.location.href + 'User Search Hotel :' + searchInformationForGA;

                    if (values.sRequestType == 'negotiate') {
                        ga('send', {
                            hitType: 'event',
                            eventCategory: 'Negotiation Search',
                            eventAction: completeInfo,
                            eventLabel: 'Page View'
                        });
                    }
                    else {
                        ga('send', {
                            hitType: 'event',
                            eventCategory: 'Regular Search',
                            eventAction: completeInfo,
                            eventLabel: 'Page View'
                        });
                    }

                    //window.open('@Url.Action("Index", "Search")?cid=' + values.cid + '&ctype=' + values.ctype + '&cname=' + values.cname + '&sCheckIn=' + values.sCheckIn + '&sCheckOut=' + values.sCheckOut + '&sRoomData=' + values.sRoomData + '&sRequestType=' + values.sRequestType);
                    window.location.href = '@Url.Action("Index", "Search")?cid=' + values.cid + '&ctype=' + values.ctype + '&cname=' + values.cname + '&sCheckIn=' + values.sCheckIn + '&sCheckOut=' + values.sCheckOut + '&sRoomData=' + values.sRoomData + '&sRequestType=' + values.sRequestType
                }
                //added kuldeep
                $('.overlay').show();
            }
        });
    });


    function setCookie(c_name, value) {
        var exdays = -1;
        var exdate = new Date();
        exdate.setHours(exdate.getHours() + exdays);
        var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString());
        document.cookie = c_name + "=" + c_value;
    }

</script>

<script>

    $(function () {
        $('[data-toggle="tooltip"]').tooltip()
    });

</script>

<script type="text/javascript">

    var count = 0;

    $.widget("custom.catcomplete", $.ui.autocomplete, {

        _create: function () {
            this._super();
            this.widget().menu("option", "items", "> :not(.ui-autocomplete-category)");
        },

        _renderMenu: function (ul, items) {
            var that = this,
           currentCategory = "";
            count = 0;
            $.each(items, function (index, item) {

                count++;
                var li;
                if (item.category != currentCategory) {
                    ul.append("<li class='ui-autocomplete-category " + item.category + "'>" + item.category + "</li>");
                    currentCategory = item.category;
                }

                li = that._renderItemData(ul, item);

                if (item.category) {
                    li.attr("aria-label", item.category + " : " + item.label);
                }
            });
        },

        _renderItem: function (ul, item) {
            return $("<li>")
            .addClass(item.category)
            .attr("data-value", item.value)
            .append($("<a>").text(item.label))
            .appendTo(ul);
        },
        _resizeMenu: function () {
            if (count > 10) {
                this.menu.element.removeClass("mod");
                this.menu.element.outerHeight(250);
            }
            else {
                this.menu.element.addClass("mod");
            }
        },
    });

</script>

<script>

    var numberOfMonth = 2;

    @if(Request.Browser.IsMobileDevice)
    {
        <text> numberOfMonth = 1; </text>
    }

    $(function () {

        $.removeCookie('scrhBidDetails');

        var proBid = [];
        proBid.push();

        $.cookie("scrhBidDetails", proBid, { expires: 2, path: '/' });

        $('#txtstayfrom').bind("cut copy paste", function (e) {
            e.preventDefault();
        });

        $('#txtstayto').bind("cut copy paste", function (e) {
            e.preventDefault();
        });

        $('#txtstayfrom').keydown(function (e) {
            e.preventDefault();
            return false;
        });

        $('#txtstayto').keydown(function (e) {
            e.preventDefault();
            return false;
        });

        var tomorrow = new Date(new Date().getTime() + 24 * 60 * 60 * 1000);
        var today = new Date();

        var from = $("#txtstayfrom").datepicker({

            changeMonth: false,
            numberOfMonths: numberOfMonth,
            minDate: today,
            dateFormat: 'dd/mm/yy',
            onSelect: function (selected, event) {

                var selectedDate = new Date(event.selectedMonth + 1 + '/' + event.selectedDay + '/' + event.selectedYear);
                var oneDayAfter = selectedDate;
                oneDayAfter.setDate(oneDayAfter.getDate() + 1);

                to.datepicker("option", "minDate", oneDayAfter);

                var afterHalfMonth = new Date(selectedDate);
                afterHalfMonth.setDate(afterHalfMonth.getDate() + 45);
                to.datepicker("option", "maxDate", afterHalfMonth);

                var txtToSelectedVal = $('#txtstayto').val();

                if (txtToSelectedVal) {

                    var toVal_ddmmyy = txtToSelectedVal.split('/');

                    if (toVal_ddmmyy) {

                        var txtToSelectedDate = new Date(toVal_ddmmyy[1] + '/' + toVal_ddmmyy[0] + '/' + toVal_ddmmyy[2])

                        if (selectedDate > txtToSelectedDate) {

                            var dd = txtToSelectedDate.getDate();
                            var mm = txtToSelectedDate.getMonth() + 1;
                            var yy = txtToSelectedDate.getFullYear();

                            dd < 10 ? dd = '0' + dd : dd = dd;
                            mm < 10 ? mm = '0' + mm : mm = mm;

                            var nextDayMMDDYYFormat_txtTo = dd + '/' + mm + '/' + yy;
                            $('#txtstayto').val(nextDayMMDDYYFormat_txtTo);
                        }
                    }
                }
                else {
                    var dd = oneDayAfter.getDate();
                    var mm = oneDayAfter.getMonth() + 1;
                    var yy = oneDayAfter.getFullYear();

                    dd < 10 ? dd = '0' + dd : dd = dd;
                    mm < 10 ? mm = '0' + mm : mm = mm;

                    var nextDayMMDDYYFormat = dd + '/' + mm + '/' + yy;
                    $('#txtstayto').val(nextDayMMDDYYFormat);
                }

                setTimeout(function () {
                    $("#txtstayto").datepicker('show');
                }, 16);
            },
            onClose: function (dateText, inst) {
                $(this).attr("disabled", false);
            },
            beforeShow: function (input, inst) {
                $(this).attr("disabled", true);
            }
        });

        var to = $("#txtstayto").datepicker({

            changeMonth: false,
            minDate: tomorrow,
            numberOfMonths: numberOfMonth,
            dateFormat: 'dd/mm/yy',
            onSelect: function (selected, event) {

                var selectedDate = new Date(event.selectedMonth + 1 + '/' + event.selectedDay + '/' + event.selectedYear);

                var txtFromSelectedVal = $('#txtstayfrom').val();

                if (txtFromSelectedVal) {

                    var fromVal_ddmmyy = txtFromSelectedVal.split('/');

                    if (fromVal_ddmmyy) {

                        var txtFromSelectedDate = new Date(fromVal_ddmmyy[1] + '/' + fromVal_ddmmyy[0] + '/' + fromVal_ddmmyy[2])

                        var oneDayBefore = selectedDate;
                        oneDayBefore.setDate(oneDayBefore.getDate() - 1);

                        if (oneDayBefore >= new Date()) {
                            if (selectedDate < txtFromSelectedDate) {

                                var dd = oneDayBefore.getDate();
                                var mm = oneDayBefore.getMonth() + 1;
                                var yy = oneDayBefore.getFullYear();

                                dd < 10 ? dd = '0' + dd : dd = dd;
                                mm < 10 ? mm = '0' + mm : mm = mm;

                                var nextDayMMDDYYFormat_txtFrom = dd + '/' + mm + '/' + yy;
                                $('#txtstayfrom').val(nextDayMMDDYYFormat_txtFrom);
                            }
                        }
                    }
                }
            },
            onClose: function (dateText, inst) {
                $(this).attr("disabled", false);
            },
            beforeShow: function (input, inst) {
                $(this).attr("disabled", true);
            }
        });


        var txtFromSelectedVal = $('#txtstayfrom').val();

        if (txtFromSelectedVal) {

            var fromVal_ddmmyy = txtFromSelectedVal.split('/');

            if (fromVal_ddmmyy) {

                var txtFromSelectedDate = new Date(fromVal_ddmmyy[1] + '/' + fromVal_ddmmyy[0] + '/' + fromVal_ddmmyy[2])

                if (txtFromSelectedDate < today) {

                    var ddToday = today.getDate();
                    var mmToday = today.getMonth() + 1;
                    var yyToday = today.getFullYear();

                    ddToday < 10 ? ddToday = '0' + ddToday : ddToday = ddToday;
                    mmToday < 10 ? mmToday = '0' + mmToday : mmToday = mmToday;

                    var TodayMMDDYYFormat_txtTo = ddToday + '/' + mmToday + '/' + yyToday;
                    $('#txtstayfrom').val(TodayMMDDYYFormat_txtTo);


                    var afterHalfMonth = new Date(today);
                    afterHalfMonth.setDate(afterHalfMonth.getDate() + 45);
                    to.datepicker("option", "maxDate", afterHalfMonth);

                    var dd = tomorrow.getDate();
                    var mm = tomorrow.getMonth() + 1;
                    var yy = tomorrow.getFullYear();

                    dd < 10 ? dd = '0' + dd : dd = dd;
                    mm < 10 ? mm = '0' + mm : mm = mm;

                    var nextDayMMDDYYFormat_txtTo = dd + '/' + mm + '/' + yy;
                    $('#txtstayto').val(nextDayMMDDYYFormat_txtTo);
                }

                else {
                    var txtToSelectedVal = $('#txtstayto').val();

                    if (txtToSelectedVal) {

                        var toVal_ddmmyy = txtToSelectedVal.split('/');

                        if (toVal_ddmmyy) {

                            var txtToSelectedDate = new Date(toVal_ddmmyy[1] + '/' + toVal_ddmmyy[0] + '/' + toVal_ddmmyy[2])

                            to.datepicker("option", "minDate", txtToSelectedDate);

                            var afterHalfMonth = new Date(txtToSelectedDate);
                            afterHalfMonth.setDate(afterHalfMonth.getDate() + 45);
                            to.datepicker("option", "maxDate", afterHalfMonth);

                            var dd = txtToSelectedDate.getDate();
                            var mm = txtToSelectedDate.getMonth() + 1;
                            var yy = txtToSelectedDate.getFullYear();

                            dd < 10 ? dd = '0' + dd : dd = dd;
                            mm < 10 ? mm = '0' + mm : mm = mm;

                            var nextDayMMDDYYFormat_txtTo = dd + '/' + mm + '/' + yy;
                            $('#txtstayto').val(nextDayMMDDYYFormat_txtTo);
                        }
                    }
                }
            }
        }
    });


    function EnsureCheckInCheckOut() {

        var fromDateString = $('#txtstayfrom').val();
        var toDateString = $('#txtstayto').val();

        if (fromDateString && toDateString) {
            var fromVal_ddmmyy = fromDateString.split('/');
            var toVal_ddmmyy = toDateString.split('/');

            if (fromVal_ddmmyy && toVal_ddmmyy) {

                var txtFromSelectedDate = new Date(fromVal_ddmmyy[1] + '/' + fromVal_ddmmyy[0] + '/' + fromVal_ddmmyy[2])

                var txtToSelectedDate = new Date(toVal_ddmmyy[1] + '/' + toVal_ddmmyy[0] + '/' + toVal_ddmmyy[2])

                if (txtToSelectedDate > txtFromSelectedDate) {
                    return true;
                }
                else {
                    toastr.error('Checkout date should be greater than checkin date !');
                    return false;
                }
            }
        }
        toastr.error('Please check the checkin and checkout date !')
        return false;
    }

</script>




<!-- #region CORPORATE WORK -->


<div id="corporateAccountPopupContainer"> </div>

<div id="corporateModalContainer"> </div>


@if (!User.Identity.IsAuthenticated)
{
    <script>
        $("#corporateAccountPopupContainer").load('/Account/GetCorporateLoginRegisterForm', function () {

            $.validator.unobtrusive.parse($('#corporateAccountPopupContainer #registerForm'));
            $.validator.unobtrusive.parse($('#corporateAccountPopupContainer #loginForm'));
            $.validator.unobtrusive.parse($('#corporateAccountPopupContainer #forgotPasswordForm'));

            $('#corporateAccountPopupContainer #lnkForgotPassword').click(function () {

                $('#divForgotPasswordCorporate').slideToggle();
            });

            $('#divCloseAndBackToAccount').hide();

            $('#corporateAccountPopupContainer .hdnCorporateRequested').val(true);

            $("#corporateAccountPopupContainer #txtCorporateEmail").rules("add", {
                required: true,
                messages: {
                    required: jQuery.validator.format("Please enter corporate email address.")
                }
            });

            $('#corporateAccountPopupContainer #txtCorporateEmail').attr("placeholder", "Corporate Email");

            $("#corporateLoginRegisterModel").on("hidden.bs.modal", function () {
                $('body').removeAttr('style');
            });
        });

    </script>
}

<script src="~/js/jquery.roomPicker.js"></script>

<script>

    var isUserLoggedIn = true;

</script>

@if (!User.Identity.IsAuthenticated)
{
    <script>

        isUserLoggedIn = false;

        $(window).bind("pageshow", function () {
            var form = $('#frmSearchBookingPopup');
            if (form && form[0]) {
                form[0].reset();
            }
        });

    </script>
}


<script>


    function ValidateSearchParameters() {

        if ($('#hdnSelectedLocalityID').val() == "" || $('#txtlocname').val().trim() == "") {
            toastr.warning('Please select the Destination City.');
            return false;
        }

        if ($('#txtstayfrom').val() == "") {
            toastr.warning('Please select your Check In date.');
            return false;
        }

        if ($('#txtstayto').val() == "") {
            toastr.warning('Please select your Check Out date.');
            return false;
        }

        FetchRoomDetails();

        if ($("#hdnJson").val() == "") {
            toastr.warning('Please select rooms.');
            return false;
        }

        var values = {
            cid: $('#hdnSelectedLocalityID').val().trim(),
            ctype: $('#hdnSelectedType').val(),
            cname: $('#txtlocname').val(),
            sCheckIn: $('#txtstayfrom').val(),
            sCheckOut: $('#txtstayto').val(),
            sRoomData: $("#hdnJson").val()
        };

        $.removeCookie('ofr.corporate.searchdata');
        var data = [];
        data.push(JSON.stringify(values));
        $.removeCookie('srchdetails');

        $.cookie("srchdetails", data, { expires: 2, path: '/' });

        $.cookie("ofr.corporate.searchdata", data, { expires: 2, path: '/' });

        if (EnsureCheckInCheckOut()) {
            return true;
        }

        return false;
    }


    function CheckCorporateAndOpenModal() {


        if (isUserLoggedIn == false) {

            $('#corporateModalContainer').load('@Url.Action("VerifyCorporateEmail","Account")', (function () {

                $('#corporateModalContainer #lblMessage').html('To know your Corporate rates, Please provide your Company Email Address and a one time verification password will be sent.');
                $('#corporateModalContainer #corporateModel').modal('show');
                $('[data-toggle="popover"]').popover();

            }));

            return false;
        }
        else {

            $('#corporateModalContainer').load('@Url.Action("VerifyCorporateEmail","Account")', (function () {

                $.get('@Url.Action("CheckIfCorporateUser", "Account")', {}, function (data) {

                    debugger;

                    if (data.status == false && data.emailOfDomainNotFound == true) {

                        $('#corporateModalContainer #lblMessage').html(data.message);
                        $('#corporateModalContainer #divCorporateVerification').hide();
                        $('#corporateModalContainer #divSearchCorporate').show();
                        $('#corporateModalContainer #btnCorporateSendOtp').hide();

                        $('#corporateModalContainer #corporateModel').modal('show');

                        var prevValues = {
                            cid: $('#hdnSelectedLocalityID').val(),
                            ctype: $('#hdnSelectedType').val(),
                            cname: $('#txtlocname').val(),
                            sCheckIn: $('#txtstayfrom').val(),
                            sCheckOut: $('#txtstayto').val(),
                            sRoomData: $("#hdnJson").val()
                        };

                        $('#hdnCorporateSelectedLocalityID').val(prevValues.cid);
                        $('#hdnCorporateSelectedType').val(prevValues.ctype);
                        $('#txtCorporateLocationName').val(prevValues.cname);
                        $('#txtCorporateStayFrom').val(prevValues.sCheckIn);
                        $('#txtCorporateStayTo').val(prevValues.sCheckOut);
                        $("#hdnJsonCorporate").val(prevValues.sRoomData);

                        $('[data-toggle="popover"]').popover();

                        return false;
                    }


                    if (data.status == true) {

                        $('#corporateModalContainer #txtCorporateEmailOTPPopup').rules('remove');

                        $("#corporateModalContainer #txtCorporateEmailOTPPopup").rules("add", {
                            required: true,
                            messages: {
                                required: jQuery.validator.format("Please enter OTP that you recieved on email.")
                            }
                        });

                        debugger;

                        $('#corporateModalContainer #btnCorporateSendOtp').text('Verify Email');

                        $("#corporateModalContainer #txtCorporateEmailPopup").val(data.corporateEmail);

                        $("#corporateModalContainer #txtCorporateEmailPopup").val(data.corporateEmail);

                        if (data.codeEncoded) {

                            $('#corporateModalContainer #hdnCorporateEmailOTP').val(data.codeEncoded);

                            $('#hdnCorporateEmailForVerificationIfChange').val(data.corporateEmail);

                            $("#corporateModalContainer #txtCorporateEmailPopup").prop('readonly', true);
                           
                            $("#corporateModalContainer #divCorporateEmailOTPPopup").show();
                        }

                    }
                    else {

                        $("#corporateModalContainer #txtCorporateEmailOTPPopup").hide();
                    }

                    if (data.showOTPMessage == true) {
                        $('#corporateModalContainer #otpErrorMessage').text(data.message).show();
                    }
                    else {
                        $('#corporateModalContainer #otpErrorMessage').text('').hide();
                        $('#corporateModalContainer #lblMessage').html(data.message);
                    }

                    $('#corporateModalContainer #corporateModel').modal('show');

                    return false;
                });

            }));
        }
    }


    $(function () {


        $('.btnCorporate').click(function () {

            if (ValidateSearchParameters()) {

                CheckCorporateAndOpenModal();
            }
        });


        if ($.cookie("ofr.corporate.required.refresh.click") == "true") {

            $('#btnplaceholder .btnCorporate').click();

            $.removeCookie('ofr.corporate.required.refresh.click');
        }

    });

</script>


<!-- #endregion -->
