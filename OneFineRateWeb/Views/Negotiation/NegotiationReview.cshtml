@model   OneFineRateBLL.Entities.PropDetailsM
@using OneFineRateAppUtil
@{
    ViewBag.Title = "NegotiationReview";
    Layout = "~/Views/Shared/_Layout.cshtml";
    decimal HotelTax = 0;
    //decimal negotiationAmount = Convert.ToDecimal(ViewBag.NegotiationAmount) ;
    //string NegotiationValue = negotiationAmount == 0 ? "" : negotiationAmount.ToString();
}

<style>
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    input[type="number"] {
        -moz-appearance: textfield;
    }
    .panel-heading .accordion-toggle:after {
        /* symbol for "opening" panels */
        font-family: 'Glyphicons Halflings'; /* essential for enabling glyphicon */
        content: "\e114"; /* adjust as needed, taken from bootstrap.css */
        float: right; /* adjust as needed */
        color: #fff; /* adjust as needed */
        background-color: #5e2e86;
    }

    .panel-heading .accordion-toggle.collapsed:after {
        /* symbol for "collapsed" panels */
        content: "\e080"; /* adjust as needed, taken from bootstrap.css */
    }
    .panel-heading {
        background-color: #5e2e86 /*5e2e86*/ !important;
        color: #fff !important;
    }
</style>

<div class="container-wrapper">

    @{
        string sMainImgUrl = Model.lstetblPhotoGallery != null && Model.lstetblPhotoGallery.Count > 0 ? Model.lstetblPhotoGallery[0].sMainImgUrl : "";
    }
    @if (Model.lstetblPhotoGallery != null && Model.lstetblPhotoGallery.Count > 0)
    {
        @Html.HiddenFor(m => Model.lstetblPhotoGallery[0].sMainImgUrl)
    }
    @Html.HiddenFor(m => Model.sPropertyName)
    @Html.HiddenFor(m => Model.iPropId)
    @Html.HiddenFor(m => Model.sPropertyAddress)
    @Html.HiddenFor(m => Model.iStarCategory)
    @for (int hdni = 0; hdni < Model.lstetblHotelFacilities.Count; hdni++)
    {
        @Html.HiddenFor(m => Model.lstetblHotelFacilities[hdni].sImgUrl)
    }

    @if (Model.TaxCharges != null)
    {
        @Html.HiddenFor(m => Model.TaxCharges.cGstValueType)
        @Html.HiddenFor(m => Model.TaxCharges.dGstValue)
        @Html.HiddenFor(m => Model.TaxCharges.dOFRServiceCharge)
        @Html.HiddenFor(m => Model.TaxCharges.TaxOnServiceCharge)
        @Html.HiddenFor(m => Model.TaxCharges.TotalServiceCharge)
    }



    @Html.HiddenFor(m => Model.sVerificationCode, new { Id = "hdnVC", name = "hdnVC" })
    @Html.HiddenFor(m => Model.sActionType, new { id = "hdnActionType" })
    @Html.HiddenFor(m => m.dSummaryGrandTotal, new { id = "hdnNegoGrandTAmt" })
    @Html.HiddenFor(x => x.TempDataPropDetails)
    <input type="hidden" id="hdnPromoValue" value="0" />
    <input type="hidden" id="hdnPromoCodeApplied" value="false" />
    <input type="hidden" id="hdnPromoCodeType" value="" />
    <input type="hidden" id="hdnPromoCode" value="" />
    <input type="hidden" id="hdnAmenityName" value="" />
    <input type="hidden" id="hdnPromoValueDesc" value="" />
    <input type="hidden" id="hdnNewTaxes" value="0" />
    <input type="hidden" id="hdnChkAgree" value="false" />

    <div class="thirdsection margintop10">

        <div class="container" style="padding-left:0px !important; padding-right:0px !important;">
            <div class="col-md-8 paddingtop-bottom15">
                <div class="row">
                    <div class="col-md-4 col-xs-12">

                        <img class="imgheight114" src='@System.Configuration.ConfigurationManager.AppSettings["BlobUrl"].ToString()@sMainImgUrl' onerror="this.src='@Url.Content("~/images/noimage.jpg")'" id="imagePreview">

                    </div>
                    <div class="col-md-5 col-xs-12">
                        <h3 class="mar-padd0">@Model.sPropertyName</h3>
                        <div class="margintop-10"> <img src="~/images/inner-star@(Model.iStarCategory).png"></div>
                        <address>
                            @Model.sPropertyAddress
                            <div class="row">
                                <div class="col-md-5 col-xs-12 reviwfacilityicon">
                                    <ul>
                                        @for (int i = 0; i < Model.lstetblHotelFacilities.Count; i++)
                                        {
                                            @Html.HiddenFor(m => Model.lstetblHotelFacilities[i].sImgUrl)
                                            <li><img src='@System.Configuration.ConfigurationManager.AppSettings["BlobUrl"].ToString()@Model.lstetblHotelFacilities[i].sImgUrl' id="iconPreview" title="@Model.lstetblHotelFacilities[i].sHotelFacilites" style="height: 20px; width: 20px"></li>
                                        }
                                    </ul>
                                </div>
                                <div class="col-md-7 col-xs-12 reviwfacilityicon">
                                    @if (!string.IsNullOrEmpty(Model.objTripAdvisonReviews.sRatingImageURL))
                                    {
                                        <img src="@Model.objTripAdvisonReviews.sRatingImageURL" /><br />
                                    }
                                    @if (!string.IsNullOrEmpty(Model.objTripAdvisonReviews.sRankingString))
                                    {
                                        <em class="green">
                                            @Model.objTripAdvisonReviews.sRankingString
                                        </em>
                                    }
                                </div>
                            </div>
                        </address>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container margintop30">

        <div class="tablebluebg">Stay Summary from @Html.Raw(Model.sCheckInDate_Display) to @Html.Raw(Model.sCheckOutDate_Display) - @Model.iTotalDays Night(s) </div>
        <div class="table-responsive tbl-grid-mobile-data" >
            <table class="table lightgrybg table-bordered table-hover">
                <tbody>
                <thead>
                    <tr>
                        <th>ROOM TYPE</th>
                        <th>ADULTS</th>
                        <th>CHILDREN</th>
                        <th>RATE/ NIGHT</th>
                        <th>EXTRA BED/ NIGHT</th>
                        <th class="width100">NIGHT(S)</th>
                        <th>TOTAL PRICE</th>
                    </tr>
                </thead>

                @{int CountIndex = 0;}

                @for (int i = 0; i < Model.lstetblRooms.Count; i++)
                {
                    @Html.HiddenFor(m => Model.iPropId)
                    @Html.HiddenFor(m => Model.lstetblRooms[i].iRoomId)
                    @Html.HiddenFor(m => Model.lstetblRooms[i].sRoomName)

                    for (int j = 0; j < Model.lstetblRooms[i].lstRatePlan.Count; j++)
                    {
                        @Html.HiddenFor(m => Model.lstetblRooms[i].lstRatePlan[j].RPID)
                        @Html.HiddenFor(m => Model.lstetblRooms[i].lstRatePlan[j].iRoomId)

                        for (int lstOcc = 0; lstOcc < Model.lstetblRooms[i].lstRatePlan[j].lstetblOccupancy.Count; lstOcc++)
                        {
                            if (Model.lstetblRooms[i].lstRatePlan[j].lstetblOccupancy[lstOcc].iNoOfRooms != 0)
                            {
                                for (int k = 0; k < Model.lstetblRooms[i].lstRatePlan[j].lstetblOccupancy[lstOcc].iNoOfRooms; k++)
                                {
                                    <tr>
                                        @{
                                            var ExtraBedNumber = @Model.lstetblRooms[i].lstRatePlan[j].lstetblOccupancy[lstOcc].ExtraBeds;
                                            var ExtraBedCharges = @Model.lstetblRooms[i].ExtraBedCharges;
                                            var ExtraCharges = ExtraBedNumber * ExtraBedCharges;
                                            var Price = @Model.lstetblRooms[i].lstRatePlan[j].lstetblOccupancy[lstOcc].dPrice;
                                            var Days = Convert.ToInt32(Model.iTotalDays);
                                            var totalrooms = @Model.lstetblRooms[i].lstRatePlan[j].lstetblOccupancy[lstOcc].iNoOfRooms;
                                            HotelTax += Model.lstetblRooms[i].lstRatePlan[j].lstetblOccupancy[lstOcc].dTaxesForHotel;
                                            var TotalPrice = (Price + ExtraCharges) * Days;

                                            ExtraBedCharges = ExtraCharges;// *(Days);

                                        }

                                        <td data-title="ROOM TYPE"><a href="javascript:void(0)" onclick="OpenPopUp('@Model.iPropId','@Model.lstetblRooms[i].iRoomId')">@Model.lstetblRooms[i].sRoomName</a></td>
                                        <td data-title="ADULTS">@Model.lstetblRooms[i].lstRatePlan[j].lstetblOccupancy[lstOcc].iAdults</td>
                                        <td data-title="CHILDREN">@Model.lstetblRooms[i].lstRatePlan[j].lstetblOccupancy[lstOcc].iChildrens</td>
                                        <td data-title="RATE/ NIGHT">
                                            @{
                                                string RatePrice = OneFineRateAppUtil.clsUtils.ConvertNumberToCommaSeprated(Price);
                                            }
                                            @RatePrice
                                            &nbsp;
                                            @{
                                                var html = "";
                                                List<string> lst = new List<string>();
                                            }
                                            @for (int lstCancellation = 0; lstCancellation < Model.lstetblRooms[i].lstRatePlan[j].lstCancellationPolcy.Count; lstCancellation++)
                                            {
                                                lst.Add(Model.lstetblRooms[i].lstRatePlan[j].lstCancellationPolcy[lstCancellation].CancellationMsg);
                                            }
                                        </td>
                                        <td data-title="EXTRA BED/ NIGHT">

                                            @{
                                                string EXPrice = OneFineRateAppUtil.clsUtils.ConvertNumberToCommaSeprated(ExtraBedCharges);
                                            }
                                            @EXPrice
                                        </td>
                                        <td data-title="NIGHT(S)">@Model.iTotalDays</td>
                                        <td data-title="TOTAL PRICE">
                                            @Model.Symbol
                                            @{
                                                string TPrice = OneFineRateAppUtil.clsUtils.ConvertNumberToCommaSeprated(TotalPrice);
                                            }
                                            @TPrice
                                        </td>
                                    </tr>

                                    <tr class="noborder">

                                        <td class="hidden-xs"><span class="pull-left">I am Important-Read Me : </span></td>
                                        @*<td><span class="pull-left">Important Information : </span></td>*@
                                        @if (Request.Browser.IsMobileDevice)
                                        {
                                            <td colspan="6" data-title="I am Important-Read Me">
                                                <a href="#divRinclusion@(CountIndex)" data-toggle="modal" data-target="#divRinclusion@(CountIndex)">
                                                    <img src="@Url.Content("~/images/info.png")">
                                                </a>
                                            </td>
                                        }
                                        else
                                        {
                                            <td colspan="6" data-title="I am Important-Read Me">
                                                <a href="javascript:void(0);" title="Policies" data-id="divRinclusion@(CountIndex)" data-placement="right" rel="popover">
                                                    <img src="@Url.Content("~/images/info.png")">
                                                </a>
                                            </td>

                                        }

                                        @{
                                            var id = string.Format(@"{0}{1}", "divRinclusion", CountIndex);
                                        }

                                        <div style="display:none;" class="modal fade" role="dialog" id="@id">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                        <h4 class="modal-title">Rate Inclusions</h4>
                                                    </div>
                                                    <div class="modal-body">
                                                        <p>
                                                            @Html.Raw(Model.lstetblRooms[i].lstRatePlan[j].RateInclusion.TrimEnd('\r', '\n').Replace(Environment.NewLine, "<br/>").Replace("\"", "\'").Replace("|", "<br/>"))
                                                        </p>
                                                        @if (Model.sActionType != "N")
                                                        {
                                                        <h4 class="modal-title">Cancellation:</h4>

                                                        <p>
                                                            @{
                                                            System.Text.StringBuilder CancelStringBuilder = new System.Text.StringBuilder();
                                                            var lstnew = lst.Distinct().ToList();
                                                            if (lstnew.Count > 0)
                                                            {

                                                            foreach (var item in lstnew)
                                                            {
                                                            CancelStringBuilder.Append(item.Replace(".", ","));
                                                            CancelStringBuilder.Append("| ");
                                                            }
                                                            }

                                                            if (CancelStringBuilder.ToString().Trim().ToLower().Contains("refundable"))
                                                            {
                                                            <span style="color:red;">@Html.Raw(CancelStringBuilder.ToString().Replace(",", ".").Replace("|", ".<br/>"))</span>
                                                            }
                                                            else
                                                            {
                                                            @Html.Raw(CancelStringBuilder.ToString().Replace(",", ".").Replace("|", ".<br/>"))
                                                            }

                                                            }
                                                        </p>
                                                        }
                                                        <h4 class="modal-title">Rate Information</h4>
                                                      
                                                           
                                                                <div style="float:left;width:300px">
                                                                    <div style="float:left;width:150px">
                                                                        Stay Date
                                                                    </div>
                                                                    <div style="float:left;width:150px">
                                                                        Price
                                                                    </div>
                                                                </div>
                                                                @for (int l1 = 0; l1 < Model.lstTaxesDateWise_OfferReview.Count; l1++)
                                                                {
                                                                /**/
                                                                if (Model.lstetblRooms[i].lstRatePlan[j].lstetblOccupancy[lstOcc].iRoomId == Model.lstTaxesDateWise_OfferReview[l1].RoomID
                                                                && Model.lstetblRooms[i].lstRatePlan[j].lstetblOccupancy[lstOcc].blsPromo == Model.lstTaxesDateWise_OfferReview[l1].bIsPromo
                                                                && Model.lstetblRooms[i].lstRatePlan[j].lstetblOccupancy[lstOcc].RPID == Model.lstTaxesDateWise_OfferReview[l1].RPID
                                                                && Model.lstetblRooms[i].lstRatePlan[j].lstetblOccupancy[lstOcc].iOccupancy == Model.lstTaxesDateWise_OfferReview[l1].iOccupancy
                                                                )
                                                                {
                                                                <div style="float:left; width:300px">
                                                                    <div style="float:left;width:150px">
                                                                        @*@Model.dtCheckIn.AddDays(l1).ToString("dd MMM,yyyy")*@
                                                                        @Model.lstTaxesDateWise_OfferReview[l1].dtDate.ToString("dd MMM,yyyy")
                                                                    </div>
                                                                    <div style="float:left;width:150px">
                                                                        @Model.Symbol  @(clsUtils.ConvertNumberToCommaSeprated(Convert.ToDecimal(Model.lstTaxesDateWise_OfferReview[l1].dBasePrice)))
                                                                    </div>
                                                                </div>
                                                                }
                                                                }
                                                           


                                                    </div>
                                                    <div class="modal-footer" style="border:0px !important;"></div>
                                                   
                                                </div>
                                            </div>
                                                    </div>

                                    </tr>

                                                                            CountIndex++;
                                                                        }
                                                                    }
                                                                }
                                                            }

                                                        }

                <tr class="noborder">

                    <td colspan="6" class="hidden-xs"><span class="pull-right">Total : </span></td>
                    <td data-title="Total"> @Model.Symbol @Model.sSummaryTotal</td>

                </tr>
                <tr class="noborder hidden-xs">
                    @if (Request.Browser.IsMobileDevice)
                    {
                        <td colspan="6">
                            <span class="pull-right">
                                <a title="Taxes and Service Fees" href="javascript:void(0);" data-placement="bottom" data-id="divTaxes" rel="popover">
                                    Taxes and  service Fees:
                                </a>
                            </span>
                        </td>
                    }
                    else
                    {
                        <td colspan="6">
                            <span class="pull-right">
                                <a title="Taxes and Service Fees" href="javascript:void(0);" data-placement="left" data-id="divTaxes" rel="popover">
                                    Taxes and  service Fees:
                                </a>
                            </span>
                        </td>
                    }
                    <td> @Model.Symbol @Model.sSummaryTaxes_display</td>

                </tr>
                <tr class="hidden-lg hidden-md">
                    <td data-title="Taxes and Service Fees">
                        @Model.Symbol @Model.sSummaryTaxes_display &nbsp;
                        <a title="Taxes and Service Fees" href="#divTaxes" data-toggle="modal" data-target="#divTaxes">
                            <img src="@Url.Content("~/images/info.png")">
                        </a>

                    </td>

                </tr>

                @if (Model.sActionType != "N")
                {
                    using (Ajax.BeginForm("ValidatePromoCode", "Negotiation", new AjaxOptions() { InsertionMode = InsertionMode.Replace, UpdateTargetId = "targetid", HttpMethod = "POST", OnSuccess = "GetResult" }))
                    {
                        <tr class="noborder">
                            @Html.HiddenFor(u => u.dtCheckIn)
                            @Html.HiddenFor(u => u.dtCheckOut)
                            @Html.HiddenFor(u => u.iPropId)
                            @Html.HiddenFor(u => u.dSummaryTotal)
                            @Html.HiddenFor(u => u.dSummaryTaxes)
                            @Html.HiddenFor(u => u.dSummaryExtraBedCharges)
                            <td colspan="6" class="hidden-xs"> <span class="pull-right">Do you have promo code: </span></td>
                            <td data-title="Do you have promo code">
                                @Html.TextBoxFor(m => m.sPromoCode, new { @class = "form-control width50 mwidth130", id = "txtPromoCode", maxlength = "100", required = "true" })
                                <button type="submit" id="btnApplyPromo" class="btn btn-default">Apply</button>
                                <br /> <span id="sppromo" style="color:#3f9841;"></span>
                            </td>

                        </tr>
                        <div id="targetid"></div>

                    }
                }
                <tr >

                    <td class="noborder hidden-xs" colspan="6"><strong class="pull-right">Grand Total: </strong></td>
                    <td  class="noborder" data-title="Grand Total"><strong  id="spTotalAmt">@Model.Symbol @Model.sSummaryGrandTotal_display </strong></td>

                </tr>
                </tbody>

            </table>
        </div>

    </div>
    <div id="divTaxes"  class="modal fade" role="dialog" style="display:none">
        <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
           <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Taxes and Service Fees</h4>
        </div>
        <div class="modal-body">
       
            <div class="row">
                <div class="col-md-12">
                    <table class="table">
                        <tbody>
                            <tr>
                                <td>Hotel Taxes</td>
                                <td>:</td>
                                <td>@Model.Symbol @(clsUtils.ConvertNumberToCommaSeprated(Math.Round(HotelTax)))</td>
                            </tr>

                            @if (Model.TaxCharges != null && Model.TaxCharges.dOFRServiceCharge > 0)
                    {
                                <tr>
                                    <td>OFR Service charge</td>
                                    <td>:</td>
                                    <td>@Model.Symbol @(clsUtils.ConvertNumberToCommaSeprated(Math.Round(Model.TaxCharges.dOFRServiceCharge)))</td>
                                </tr>

                        if (Model.TaxCharges.cGstValueType == "p")
                        {
                                    <tr>
                                        <td>GST on OFR Service charge (@Model.TaxCharges.dGstValue%)</td>
                                        <td>:</td>
                                        <td>@Model.Symbol @(clsUtils.ConvertNumberToCommaSeprated(Math.Round(Model.TaxCharges.TaxOnServiceCharge)))</td>
                                    </tr>
                        }
                        else
                        {
                                    <tr>
                                        <td>GST on OFR Service charge</td>
                                        <td>:</td>
                                        <td>@Model.Symbol @(clsUtils.ConvertNumberToCommaSeprated(Math.Round(Model.TaxCharges.TaxOnServiceCharge)))</td>
                                    </tr>
                        }
                    }


                        </tbody>

                    </table>
                </div>
            </div>
                </div>
        

        @*<p>
                In connection with facilitating your hotel transaction when onefinerate charges your card, the charge to your payment method will include a charge for Taxes and Service Fees. This charge includes an estimated or anticipated amount to recover the amount we pay to the hotel in connection with your reservation for taxes owed by the hotel including, without limitation, sales and value added tax and/or other similar taxes. The amount paid to the hotel in connection with your reservation for taxes may vary from the amount we estimate and include, in the charge to you. The balance of the charge for Taxes and Service Fees is a fee we retain as part of the compensation for our services and to cover the costs of your reservation, including, for example, customer service costs. The charge for Taxes and Fees varies based on a number of factors including, without limitation, the amount we pay the hotel and the location of the hotel where you will be staying, and may include profit that we retain.
            </p>
            <p> Taxability and the appropriate tax rate and the type of applicable taxes vary greatly by location.<br />For transactions involving hotels located within certain jurisdictions, the amount charged to you for Taxes and Service Fees includes a payment of tax that we are required to collect and remit to the jurisdiction for tax owed on amounts we retain as compensation for our services.</p><p>
                Depending on the property you stay at you may also be charged for certain optional incidental fees, for example, parking charges, minibar charges, phone calls, room service and movie rentals, etc. These charges, if applicable, will be payable by you to the hotel directly in local currency at checkout. When you check in, a credit card or, in the hotel's discretion, a debit card will be required to secure these charges and fees that you may incur during your stay. Please contact the hotel directly as to whether and which charges or service fees apply.
            </p>*@
        </div>

         </div>
            </div> 
    </div>

    <script>
        var popover = $("[rel='popover']").popover({
            trigger: 'hover',

            html: 'true'
        }).on('show.bs.popover', function () {
            popover.attr('data-content', $('#' + $(this).data('id')).find('div.modal-body').html());
        }).on('click', function () {
            return false;
        });

    </script>




    @if (Model.sActionType == "N")
    {
        <div class="container ">
            <div class="row">
                <div class="col-md-12">
                    <h3 class="whathpn">What happens next</h3>
                    <ul class="whathppn">
                        <li>
                            Preview the rate that you want to Bargain on.
                        </li>
                        <li>
                            Provide your offer.
                        </li>
                        <li>
                            Deposit INR 500 as a signing amount.
                        </li>
                        <li>
                            OneFineRate will bargain with the hotel for you and get back to you in the next 3 business hours [Business hours- IST 0900 to 1800 hrs/GMT+05:30 hrs].
                        </li>
                    </ul>
                </div>
            </div>
            <div class="tablebluebg">Your Offer</div>
            <div class=" table-responsive table-bordered padding15 lightgrybg">
                <div class="row">
                    <div class="col-md-12">Start bargaining and place your offer:</div>
                    <div class="col-md-2 col-xs-6">Must be higher than  </div>
                    <div class="col-md-2 col-xs-6 "><span class=" alert border1 bg-warning"><strong>@Model.Symbol @Model.sNegotiationAmtMax</strong></span></div>
                    <div class="col-md-2 col-xs-6">(Excluding Taxes)</div>
                </div>
                <div class="row">
                    <div class="col-md-2 col-xs-4 margintop10">
                        Your Offer  :
                    </div>
                    <div class="col-md-2 col-xs-8 margintop10">
                        <input type="number" id="txtNegotiaionAmount" oninput="if (this.value.length > 10){ this.value = this.value.slice(0, 10);}" value="@ViewBag.NegotiationAmount" maxlength="10" class="form-control ">
                        <button class="btn btn-bannerbtn margintop10" id="anCalculate" style="cursor:pointer;">Calculate Grand Total</button>
                    </div>
                    <div class="col-md-8 col-xs-12  margintop10">
                        <span class="redtext paddingleft0 ">* This is the total amount you wish to pay for the above booking (Excluding Taxes)</span>
                    </div>
                </div>
                @*<div class="row ">
                        <div class="col-md-3 margintop10">Taxes and other service charges :</div>
                        <div class="col-md-9 margintop10"> <strong>@Model.Symbol @Model.dSummaryTaxes</strong></div>
                    </div>*@

                <div class="row">

                    <div class="col-md-2 col-xs-4 ">Grand Total : </div>
                    <div class="col-md-10 col-xs-8">
                        <strong id="spgrantotal"></strong>
                        <span style="display:none" id="spgrantotal_span"> [inclusive of taxes <span class="red">*</span>]</span>
                    </div>
                    <div class="clearfix"></div>
                    @*<div class="col-md-12" style="color:red"></div>*@
                    <div class="col-md-12 col-xs-12">
                        <div class="redtext paddingleft0 lineheight21 txtjustify">
                            * Taxes and charges are calculated on published rates.<br />
                            * For us to bargain on your behalf, you need to deposit signing amount of INR 500. This  will be adjusted against the reservation, if your offer is accepted.<br />
                            Please allow us approximately 3 hours [Business hours- IST 0900 to 1800 hrs/GMT+05:30 hrs] to get you the rate of your choice.
                            <br>
                            <ul class="bullets1">
                                <li>
                                    If your offer is not accepted, INR 500 will be refunded within 24 hours if paid through PAYU wallet or 3-4 business days if paid through any other payment method as per banking norms.
                                </li>
                                <li>
                                    If your offer is accepted, please pay the balance reservation amount within 3hours of receiving the confirmation.<br>
                                </li>
                                @*<li>
                                        Please allow us approximately 3 hours [Business hours- IST 0900 to 1800 hrs/GMT+05:30 hrs] to get you the rate of your choice.<br>
                                    </li>
                                    <li>
                                        If your Bargain is not accepted, INR 500 will be refunded within 24 hours if paid through PAYu wallet or 3-4 business days if paid through any other payment method as per banking norms.<br />
                                    </li>*@

                                <li>
                                    In case, your offer is accepted  successful and the balance reservation amount is not paid, you will forfeit the advance of INR 500.<br>
                                </li>
                                <li>
                                    <strong>
                                        Rooms purchased through the OFR Bargain option cannot be cancelled, modified, transferred or refunded.
                                    </strong>
                                </li>
                            </ul>
                        </div>

                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        PLEASE NOTE :
                        <span style="color:red">
                            Any requests for bed types, early check in, late check out, smoking room etc, are subject to availability and at the discretion of hotel. These cannot be guaranteed by OFR
                        </span>
                    </div>
                </div>
            </div>
        </div>
    }
    else
    {
        <style>
            li {
                list-style-type: disc !important;
            }
        </style>

        <div class="container margintop30 hidden-xs">
            <div class="tablebluebg">Important Information</div>
            <div class=" table-responsive table-bordered padding10 lightgrybg">
                <ul class="paddingleft10">
                    <li>
                        Requests for bed types (King, Queen, 2 Doubles, etc.) including preferences like early check in, late check out, smoking room etc. are strictly at the discretion of the hotel and subject to availability and are not to be understood as guaranteed.
                    </li>
                    <li>
                        Reservation is guaranteed for arrival on the confirmed date of check-in only. If you do not check-in on the first day of your reservation, the remainder of the stay will be deemed canceled too. No refund will be applicable.
                    </li>
                    <li>
                        This reservation and the rate is governed by the Hotel’s cancellation policy.
                    </li>
                    <li>
                        The reservation holder must present a valid Credit Card/ Debit Card at the time of check-in.
                    </li>
                    <li>
                        According to government regulations, it is mandatory to present a valid Photo ID at check in by every person above the age of 18 staying at the hotel. A Driver's License, Voter's Card, Aadhar Card and Passport are all acceptable as identity proof. PLEASE NOTE PAN cards are not a valid ID. Without a valid photo ID with address, no guest will be allowed to check in.
                    </li>
                    <li>
                        The primary guest checking in to the hotel must be at least 18 years of age.
                    </li>
                    <li>
                        The inclusion of an extra bed with a booking is facilitated with a folding cot or a mattress.
                    </li>
                    <li>
                        A booking cannot be canceled on or after the check in date and time mentioned in the Hotel Confirmation Voucher.
                    </li>
                    <li>
                        The hotel reserves the right of admission. Accommodation can be denied to guests posing as a ' couple' if suitable proof of identification is not presented at check-in. OneFineRate will not be responsible for any check-in denied by the hotel due to the aforesaid reason.
                    </li>
                    <li>
                        The hotel reserves the right of admission for local residents. Accommodation can be denied to guests residing in the same city. OneFineRate will not be responsible for any check-in denied by the hotel due to the aforesaid reason.
                    </li>
                    <li>
                        For any update to a booking, cancellation/modification charges are applicable as per hotel policy
                    </li>
                    <li>
                        All distances (Airport/Station etc.) are approximate and actual driving distances may vary based on the route taken.
                    </li>
                    <li>
                        Hotels may charge a mandatory meal surcharge on festive periods e.g. Christmas, New Year's Eve etc.  All additional charges (including mandatory meal surcharges) need to be cleared directly at the hotel.
                    </li>
                </ul>
            </div>
            
        </div>
        <div class="panel-group hidden-lg hidden-md" id="accordion">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a href="#ImportantInformation" class="accordion-toggle" data-parent="ImportantInformation-Container" data-toggle="collapse">Important Information</a>
                    </h4>
                </div>
                <div id="ImportantInformation" class="panel-collapse collapse">
                    <div class="panel-body">
                        <div class=" table-responsive table-bordered padding10 lightgrybg">
                            <ul class="paddingleft10">
                                <li>
                                    Requests for bed types (King, Queen, 2 Doubles, etc.) including preferences like early check in, late check out, smoking room etc. are strictly at the discretion of the hotel and subject to availability and are not to be understood as guaranteed.
                                </li>
                                <li>
                                    Reservation is guaranteed for arrival on the confirmed date of check-in only. If you do not check-in on the first day of your reservation, the remainder of the stay will be deemed canceled too. No refund will be applicable.
                                </li>
                                <li>
                                    This reservation and the rate is governed by the Hotel’s cancellation policy.
                                </li>
                                <li>
                                    The reservation holder must present a valid Credit Card/ Debit Card at the time of check-in.
                                </li>
                                <li>
                                    According to government regulations, it is mandatory to present a valid Photo ID at check in by every person above the age of 18 staying at the hotel. A Driver's License, Voter's Card, Aadhar Card and Passport are all acceptable as identity proof. PLEASE NOTE PAN cards are not a valid ID. Without a valid photo ID with address, no guest will be allowed to check in.
                                </li>
                                <li>
                                    The primary guest checking in to the hotel must be at least 18 years of age.
                                </li>
                                <li>
                                    The inclusion of an extra bed with a booking is facilitated with a folding cot or a mattress.
                                </li>
                                <li>
                                    A booking cannot be canceled on or after the check in date and time mentioned in the Hotel Confirmation Voucher.
                                </li>
                                <li>
                                    The hotel reserves the right of admission. Accommodation can be denied to guests posing as a ' couple' if suitable proof of identification is not presented at check-in. OneFineRate will not be responsible for any check-in denied by the hotel due to the aforesaid reason.
                                </li>
                                <li>
                                    The hotel reserves the right of admission for local residents. Accommodation can be denied to guests residing in the same city. OneFineRate will not be responsible for any check-in denied by the hotel due to the aforesaid reason.
                                </li>
                                <li>
                                    For any update to a booking, cancellation/modification charges are applicable as per hotel policy
                                </li>
                                <li>
                                    All distances (Airport/Station etc.) are approximate and actual driving distances may vary based on the route taken.
                                </li>
                                <li>
                                    Hotels may charge a mandatory meal surcharge on festive periods e.g. Christmas, New Year's Eve etc.  All additional charges (including mandatory meal surcharges) need to be cleared directly at the hotel.
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    }


    <div class="container" id="fill">
        <div class="form-inline">
            <div class="form-group">
                <input type="checkbox" class="checkbox" id="chkAgree">
                <label for="chkAgree" style="cursor:pointer">
                    I have read, accepted and agree to OneFineRate's
                    <a class="showpointer" href="#" onclick="Opentc();">Terms and Conditions</a>
                    <a class="showpointer" href="#" onclick="OpenPP();">and Privacy Policy.</a>
                    @*and<a class="showpointer" href="#" onclick="OpenHP();">Hotel Policy</a>*@
                </label>
            </div>
        </div>
    </div>
    <!-- Terms and conditions pop up -->
    <div id="divTC" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Terms and Conditions</h4>
                </div>
                <div class="modal-body">
                    <p><strong>Acceptance of Terms</strong></p>

                    <p>These Terms of Use (the &quot;Terms&quot;) provided below are with respect to the access and use of the www.OneFineRate.com website (the &quot;Website&quot;) and/or any services provided therein which may be accessed via, but not restricted to, the World Wide Web and these Terms shall apply whenever you access the Website, on whatever device(s).</p>

                    <p>The Website is a service of Samaara Hotels and Services Pvt. Ltd ], having its registered office at 150, TATVAM VILLAS, SOHNA ROAD, SECTOR-48, Gurgaon, Haryana, 122002, India (the &ldquo;Company&quot;). The company provides its service to you subject to the Terms as contained herein.</p>

                    <p>These Terms govern use of the Website. By accessing and/or using the Website and/or any services provided therein in any manner whatsoever, you agree to accept these Terms in full and be legally bound by the same. If you disagree with these Terms or any part of these Terms, you shall not use and/or access the Website and/or any services provided therein or any part thereof.</p>

                    <p>You acknowledge and understand that the Company may require you to register and provide certain information to it as a condition of using or accessing certain services, features, functions and content and you undertake to provide all the said particulars truthfully and to the best of your knowledge and information.&nbsp;</p>

                    <p>The Company may change and/or amend these Terms from time to time. As and when such changes and/or amendments are made, the changed and/or amended Terms (the &ldquo;Amended Terms&rdquo;) shall be made available for you to view through www.OneFineRate.com/termsandconditions.</p>

                    <p>You agree that if you use or continue to use the Website and/or any services provided therein on and/or after the date on which the Amended Terms are notified on the Website, the Company shall be entitled to presume your use as acceptance of such Amended Terms.</p>

                    <p>You must be at least 18 years of age to use the Website and/or any services provided therein. By using the Website and by agreeing to the Terms, you warrant and represent that you are at least 18 years of age and are competent to contract under the laws of India and in case of any misrepresentations and/or false assertions on this ground, you shall be solely responsible for any dispute or claim arising out of or in connection with such misrepresentation and/or false assertion whatsoever and further hereby irrevocably agree to defend and/or settle any third party lawsuit or proceeding brought against the Company, its subsidiaries, its directors, officers, employees, agents, advertisers, licensors, suppliers, based upon such false claims, assertions and misrepresentations.</p>

                    <p>Any reference to the expression &ldquo;Website&rdquo; in these Terms shall also include a reference to the Services provided by the Company, its directors, its subsidiaries, officers, employees, agents, advertisers, licensors, and suppliers through these Terms as defined herein below.</p>

                    <p>Unless repugnant to the context thereof, any reference to the expression &ldquo;Company&rdquo; shall include its directors, its subsidiaries, officers, employees, agents, advertisers, licensors, and suppliers.</p>

                    <p>The term &lsquo;Buy Rate&rsquo; shall refer to the price (excluding applicable taxes, cesses, charges and levies, if applicable) for a particular property/hotel for one night&rsquo;s stay for a certain category of room, for the selected period of stay, as displayed while you access the &lsquo;BUY&rsquo; section or &lsquo;Corporate&rsquo; section of the Website. Such rates that are displayed are the prerogative of the property/hotel and are distributed by the property/hotel for the value that they represent. Neither can the rate nor the value that they represent or the terms &amp; conditions that are linked to such rates can be contested..</p>

                    <p>Unless expressly stated otherwise, prices indicated on the Website shall be for one night stay for a particular room for accommodation purposes only at theproperty/hotel, without any meals and excluding applicable taxes, cesses, charges and levies, if any.</p>

                    <p>Featured/ Sponsored properties or any other marketing on the website is totally for marketing purposes and OneFineRate does not endorse any of these properties and is not responsible for any of their quality and services provided.&nbsp;</p>

                    <p>Disclosure: for purposes of clarification, the prices offered to you include the fees charged by OneFineRate to the hotel for its services.</p>

                    <p><strong>Services</strong></p>

                    <p>OneFineRate is an online portal which assists and effecting the booking of hotels/ or any others accommodation by web users. Maintaining and online inventory of room and rates provided by the Hotel and/or any third party partner for accommodation in Hotels or/and any other accommodation and eventually enabling the web users to book rooms at the available rates.</p>

                    <p>Eliciting and collecting demand from customers regarding the hotel booking details including rooms, rates for such rooms, kind of hotels etc, and relaying such demands directly to the participating seller being a hotel or an accommodation or a travel agent or to their private data bases to assist the web users in transacting at the &ldquo;Right&rdquo; Price.</p>

                    <p>At OneFineRate customers can explore, compare and book hotel rooms on one single platform. OneFineRate.com offers three parallel alternatives to book a hotel room -- you can either <strong>bid</strong> for your preferred hotel or you can <strong>bargain</strong> a rate you wish to pay directly to your hotel. Or, if you know what exactly you want then simply <strong>book</strong> it at the price offered by the hotel.</p>

                    <p>Customers can choose from a range of hotels across cities and destinations offering incredible rates and amenities. &nbsp;</p>

                    <p>To understand how we operate, you need to understand the <strong>three</strong> major components we operate on:</p>

                    <p><strong>Bid</strong>: Place a blind bid by selecting your star rating of the hotel. If you are looking for a specific locality in the city, you can select that too. OFR will recommend the range of rates to choose from, and if your bid is accepted you will get a deal for yourself in as short a time as possible.</p>

                    <p><strong>Bargain</strong>: Bargain the rates you wish to pay for your preferred hotel and OFR will work out a deal with your hotel at the price you wish to pay. If we are unable to find your preferred hotel at your price, we will find you a similar hotel with same services and amenities for the same price.</p>

                    <p><strong>Book</strong>: Our third platform is like any other travel portal, if you know exactly what you want than you can simply buy it at the rate offered by the hotel. In addition, OFR also provides discounted <strong>corporate rates</strong> for your business travel. Our self booking tool provides rates for any destination, saving you and your support staff the hassle to bargain rates for your travel. Let OFR work special rates for your business travel now and in the future.</p>

                    <p>&nbsp;</p>

                    <p><strong>Licence to use Website </strong>&nbsp;</p>

                    <p>Subject to your acceptance of these Terms, the Company grants you a non-exclusive, non-transferable limited license to use the Website and/or its Services in strict accordance with the terms and conditions in these Terms and as permitted via instructions on the Website.</p>

                    <p>Certain services and content offered by the Company through the Website may only be accessible to registered members. To register, you may be required to provide certain information and/or details, for the accuracy and/or completeness of which you agree to be solely liable. The provision of various services offered by the Website shall be subject to the accuracy and/or completeness of the information and/or details so supplied by you.</p>

                    <p>Except as may be explicitly permitted through this site, you agree not to save, download, cut and paste, sell, license, rent, lease, modify, distribute, copy, reproduce, transmit, publicly display, publicly perform, publish, adapt, edit, or create derivative works from materials, code or content on or from the Website. Systematic retrieval of data or other content from the Website to create or compile, directly or indirectly, a collection, compilation, database or directory without written permission from the Company is prohibited. In addition, use of the content or materials for any purpose not expressly permitted under these Terms is prohibited and shall entail a penal action.</p>

                    <p><strong>Intellectual property rights/ Data protection </strong></p>

                    <p>The Website contains material, trade names and marks and other proprietary and/or confidential information, including, but not limited to, various data (including price sensitive information), text, software, photos, graphics, video, music and sound (&ldquo;Content&rdquo;), which may either be owned by the Company or any other third party/parties and may be a subject matter of protection under the relevant laws.</p>

                    <p>Nothing on the Website shall be construed as conferring any license/right to reproduce the contents therein whether owned by the Company or any third party and the violation of the same may result in initiation of legal action by the owner/proprietor/holder of the said rights.</p>

                    <p><strong>Conditions of Use </strong></p>

                    <p>You agree that you shall not comment, share, display, upload, modify, publish, transmit, update or share any information on the Website site that:</p>

                    <p>(a) belongs to another person and to which you do not have any right;</p>

                    <p>(b) is grossly harmful, harassing, blasphemous, defamatory, obscene, pornographic, pedophilic, libelous, invasive of another&#39;s privacy, hateful, or racially, ethnically objectionable, disparaging, relating or encouraging money laundering or gambling, or otherwise unlawful in any manner whatever;</p>

                    <p>(c) harm minors in any way;</p>

                    <p>(d) infringes any patent, trademark, copyright or other proprietary rights;</p>

                    <p>(e) violates any law for the time being in force;(f) deceives or misleads the addressee about the origin of such messages or communicates any information which is grossly offensive or menacing in nature;</p>

                    <p>(g) impersonate another person;</p>

                    <p>(h) contains software viruses or any other computer code, files or programs designed to interrupt, destroy or limit the functionality of any computer resource;</p>

                    <p>(i) threatens the unity, integrity, defence, security or sovereignty of India, friendly relations with foreign states, or public order or causes incitement to the commission of any cognisable offence or prevents investigation of any offence or is insulting any other nation.</p>

                    <p>You further agree that you shall not:</p>

                    <p>Reproduce, copy, modify, sell, store, distribute or otherwise exploit for any commercial purposes the Website, or any component thereof (including, but not limited to any data, materials or information accessible through the Website);</p>

                    <p>Use any device and/or software to interfere or attempt to interfere with the proper working of the Website and/or take any action that imposes an unreasonable or disproportionately large load on the Website infrastructure.</p>

                    <p>You further agree to indemnify and hold harmless, without objection, the Company, its subsidiaries, its directors, officers, employees, agents, advertisers, licensors, suppliers, and partners against all and any claims, actions and/or demands and/or liabilities and/or losses and/or damages whatsoever arising from or resulting from or in any way related to such actions and/or conduct as stated under this clause.</p>

                    <p>&nbsp;You agree and understand that the terms and conditions of provision of services appearing herein or at any other place on the Website, whether provided by the Company or a third party service provider, may be non-exhaustive, incomplete, suggestive and/or abridged, and are subject to revision, addition, modification and/or change, without prior notice, at the [COMPANY&rsquo;s] or respective third party service provider&rsquo;s discretion, as the case may be.</p>

                    <p><strong><em>Bid:</em></strong> This sub-clause pertains to your use of the Website when you select the &lsquo;Bid&rsquo; option. Upon selecting the desired geographic area, dates of stay and star category, you shall be presented with a price spectrum. You may enter any price falling between the lower cap and upper cap of price spectrum that you&rsquo;re willing to pay for your stay.</p>

                    <p>Upon submitting your price (hereinafter, &lsquo;Bid&rsquo;), you shall be presented with one or more options to choose from, as per the inputs provided by you under the previous step. The options displayed shall not reveal the names/ addresses or other details of the property/hotel(ies) listed, but may state certain other information, characteristics, terms &amp; conditions of stay of the property/hotel. Such terms &amp; conditions, if stated, shall by no means be exhaustive and all other and further terms &amp; conditions, if any, shall be applicable in addition to the terms &amp; conditions stated to your stay at that particular property/hotel. Each of the options presented shall be offered at a discount off the Buy Rate for that particular property/hotel for the specific period of stay that you input, but the quantum of discount / savings for the said property/hotel shall be revealed to you only after you select the said option as your preference and make full and final payment towards the same.</p>

                    <p>In case you choose one of the options presented to you as aforementioned, you shall be required to make full and final payment towards the same. Such payment shall be the amount that you chose to enter as your Bid along with applicable taxes, cesses, charges and levies, if any. Further, such payment shall not be refunded in any case, and shall constitute your full, final and irrevocable consent and consideration towards a binding contract for the option selected by you.</p>

                    <p>As soon as our third party payment gateway partner processes your payment, the name, address and other details of the option that you selected shall be revealed, along with further detailed terms &amp; conditions of your stay as well as your booking reference number.</p>

                    <p>At this stage, subject to availability, you may be given the option to upgrade to a higher class of service/room at additional payment at the property/hotel you selected, in which case the payment already made by you shall be adjusted as part payment towards the payment due for the higher class of service selected by you.</p>

                    <p><strong><em>Bargain</em></strong>: This sub-clause pertains to your use of the Website when you select the &lsquo;Bargain&rsquo; option.</p>

                    <p>Upon selecting the desired property/hotel, room category/package(s) and dates of stay, you shall be required to submit a price that you&rsquo;re willing to pay for your stay (hereinafter, &lsquo;Offering Price&rsquo;).</p>

                    <p>Upon submitting your price, you shall be required to pay a nominal participation fee&nbsp; as desired by the OneFineRate management]. Pursuant to our third party payment gateway partner processing the payment of your participation fee, a communication shall be sent to the nominated personnel of the property/hotel/third party service provider selected by you with your Offering Price. Such nominated personnel shall typically revert within 2 business days with a communication stating whether your Offering Price is accepted or rejected, with or without a counter-offer.</p>

                    <p>In case your Offering Price is rejected, you shall be given the option to either (i) accept the counter-offer, if any, made by such nominated personnel or (ii) select another property/hotel/service offering/third party service provider, or (iii) ask for refund of your participation fee, which refund shall typically be processed within 48 hours of such request.</p>

                    <p>In case your Offering Price is accepted or you accept the counter-offer made to you, you shall be intimated and required to deposit the full and final payment towards your stay, and your participation fee shall be adjusted against such full and final payment. Such payment shall be the Offering Price or the counter-offer, as the case may be, along with applicable taxes, cesses, charges and levies, if any. Further, such payment shall not be refunded in any case, and shall constitute your full, final and irrevocable consent and consideration towards a binding contract for the option selected by you.</p>

                    <p>As soon as our third party payment gateway partner processes your payment, your booking reference number shall be provided to you.</p>

                    <p><strong><em>Buy</em></strong>: This sub-clause pertains to your use of the Website when you select the &lsquo;Buy&rsquo; option.</p>

                    <p>Upon selecting the desired geographic area, dates of stay and star category, you shall be presented with various options/properties/third party service providers, along with the Buy Rate for the specified category of room, per night.</p>

                    <p>The options displayed may state certain other information, characteristics, terms &amp; conditions of stay of the property/hotel. Such terms &amp; conditions, if stated, shall by no means be exhaustive and all other and further terms &amp; conditions, if any, shall be applicable in addition to the terms &amp; conditions stated to your stay at that particular property/hotel.</p>

                    <p>In case you choose one of the options presented to you as aforementioned, you shall be required to make full and final payment towards the same. Such payment shall be equal to an amount including the Buy Rate provided for the selected option along with applicable taxes, cesses, charges and levies, if any.</p>

                    <p>As soon as our third party payment gateway partner processes your payment, your booking reference number shall be provided to you.</p>

                    <p><strong><em>Corporate</em></strong>: This sub-clause pertains to your use of the Website when you select the&nbsp; &lsquo;Corporate&rsquo; option.</p>

                    <p>The corporate email address should be given and the company domain should be valid and be an onefinerate corporate partner.</p>

                    <p>The one time verification password will be sent to the registered email address only and will be valid for the next 30 mins.&nbsp;</p>

                    <p>Upon selecting the desired geographic area, dates of stay and star category, you shall be presented with various options/properties/third party service providers, along with the Buy Rate for the specified category of room, per night.</p>

                    <p>The options displayed may state certain other information, characteristics, terms &amp; conditions of stay of the property/hotel. Such terms &amp; conditions, if stated, shall by no means be exhaustive and all other and further terms &amp; conditions, if any, shall be applicable in addition to the terms &amp; conditions stated to your stay at that particular property/hotel.</p>

                    <p>In case you choose one of the options presented to you as aforementioned, you shall be required to make full and final payment towards the same. Such payment shall be equal to an amount including the Buy Rate provided for the selected option along with applicable taxes, cesses, charges and levies, if any.</p>

                    <p>As soon as our third party payment gateway partner processes your payment, your booking reference number shall be provided to you.</p>

                    <p>In case you access the Website through the &lsquo;Corporate&rsquo; option, in addition to the present terms and conditions, you hereby expressly agree to be bound by the agreement entered into between the Company and your employer.</p>

                    <p><strong>Contributing to the Website </strong></p>

                    <p>Where you elect, or are invited, to submit any contribution or material to the Website (including, but not limited to, any comment, text, photographs, graphics, video, audio or logo) (&ldquo;Contribution&rdquo;) or otherwise consent to the use of the Contribution, then by submitting the Contribution or consenting to its use, grant the Company a royalty-free, non-exclusive, irrevocable and perpetual licence and right to use, reproduce, modify, adapt, publish, translate, abridge, create derivative works from, distribute, perform, play, make available to the public, and exercise all copyright and publicity rights with respect to your Contribution worldwide and/ or to incorporate your Contribution in other works in any media now known or later developed for the full term of any rights that may exist in your Contribution.</p>

                    <p>Wherever the Company so decides to use the Contribution, the Company may publish the same without acknowledging you as the author of the said Contribution and in which eventuality you expressly waive all your copyrights and moral rights to be identified as the author of such Contribution. However, you agree to remain liable and to completely indemnify and hold harmless the Company in case the Contribution violates any third party rights even if your name has been withheld by the Company from such Contribution.</p>

                    <p><strong>Indemnification</strong></p>

                    <p>You agree to indemnify and hold harmless, without any limitation, the Company, its subsidiaries, its directors, officers, employees, agents, advertisers, licensors, suppliers, and partners from and against any claims, actions and/or demands and/or liabilities and/or losses and/or damages whatsoever arising from or resulting from or in any way related to your use and/or inability to use the Services or services offered by third parties through the Website, violation of the Terms or any other actions connected with the use of Services or services offered by third parties through the Website, including any liability or expense arising from all claims, losses, damages (actual and consequential), suits, judgments, litigation costs and attorneys&#39; fees, of every kind and nature either during the period that you are accessing the Website and/or any of its Services or services offered by third parties through the Website, and even after termination of the same in respect of any claims, actions and/or demands and/or liabilities and/or losses and/or damages whatsoever which have arisen at any time during such period that you accessed the Website and/or any of its Services or services offered by third parties through the Website. And further you agree to indemnify the Company its subsidiaries, its directors, officers, employees, agents, advertisers, licensors, suppliers, and partners in respect of any claim of ownership or any other claims associated with any logos, brands, trade marks and service marks or any other intellectual property, created and/or posted by you on the Website in violation of third-party rights to the same.</p>

                    <p><strong>Disclaimer of Warranties</strong></p>

                    <p>Except for the express warranties stated herein, the Website as well as any other Services as provided by the Company under these Terms are provided on an &quot;as is&quot; basis, and the company disclaims any and all other warranties, conditions, or representations (express, implied, oral or written), relating to the Website and/or such Services or any part thereof, including, without limitation, any and all implied warranties of quality, performance, usability, accessibility, accuracy of content or fitness for a particular purpose. The Company further expressly disclaims any warranty or representation to any third party whatsoever.</p>

                    <p>It is solely your responsibility to evaluate the accuracy, completeness and usefulness of all opinions, advice, services, merchandise and other information provided through the Website.</p>

                    <p>Since the Company acts only as an intermediary service provider, the Company shall not have any liability whatsoever for any aspect of the arrangements between the end service provider and you, or for the services provided by the end service provider.</p>

                    <p>Although the Company makes reasonable commercial efforts to ensure that the description and content in the terms &amp; conditions and on each page of the website is correct, you agree that the Company shall not be liable for changes that occurred due to human or data entry errors or for any loss or damages suffered by any user due to any information contained herein. Also, since the Company is only an intermediary and not the end service provider, you agree, understand and acknowledge that the Company cannot control or prevent changes/ inaccuracies/ errors in the published descriptions, pictures, information, policies, facilities, terms and conditions and other content which are based upon information provided by end service providers or various other third party data sources, and the Company shall not be liable for any loss, damage and/or harm caused by the same.</p>

                    <p>The Company does not warrant that the access to the Website will be uninterrupted, delay-free or error-free or that defects in the Website will be corrected although every effort shall be made to keep the Website up and running at all times.</p>

                    <p>In case the there is any loss of information, caused due to any reason, whether as a result of any disruption of service, suspension and/or termination of the Service, the Company shall not be liable in any way for the same.</p>

                    <p>The Company does not guarantee the accuracy, truthfulness and veracity of any statement, offer, comment, claim, averment, contention etc. made on the Website or in the Company&rsquo;s correspondence with you. You agree and understand that the Company is only an intermediary between you and the end service provider. There are risks, which you agree to assume when choosing to avail services listed on the Website offered by an end service provider, and you hereby irrevocably agree that the Company shall not be responsible in any manner whatsoever for the liability arising out of the same.</p>

                    <p>The Company will not be liable for any loss or damage caused by, including but not limited to, a distributed denial-of-service attack, viruses or other technologically harmful material that may infect your computer equipment, computer programs, data or other proprietary material due to your use of the Website or to your downloading of any material posted on it, or on any website linked to it though the company shall make all efforts to ensure the proper functioning of the Website at all times.</p>

                    <p>The Website is controlled and operated from India by the Company and the Company makes no representation that the material, content and/or services provided by the Company under these Terms are appropriate or will be available for use in other parts of the world. If you access the Website from outside India, you hereby agree to be entirely responsible for compliance with all applicable local laws as well as international conventions and treaties in this regard.</p>

                    <p>The Company does not, by offering travel related services to particular destinations, represent or warrant that travel to such destinations is without risk, and shall not be liable for damages or losses that may result from travel to such destinations.</p>

                    <p>You shall solely be liable to ensure compliance with all legal and contractual requirements and obligations relating to, pertaining to, arising out of, or existing as a pre-condition to your travel/stay/utilization of various services availed through the Website and/or provided by third party service providers, as applicable under relevant laws, or as required by relevant third parties.</p>

                    <p><strong>Limitation of Liability</strong></p>

                    <p>In no event and under no circumstances will the Company be liable for any damages whatsoever, including but not limited to direct, indirect, incidental, punitive or consequential, arising out of the use and/or access to or inability to use and/or access to the Website and/or any Services being provided by the Company under these Terms, even if the Company has been advised of the possibility of such damages.</p>

                    <p>Notwithstanding anything else contained herein, it is hereby expressly agreed that the maximum liability of the Company arising under any circumstances, in respect of any services offered through the Website and/or by access/use of the Website otherwise, shall be limited to the refund of total amount received from you for availing the said services less any cancellation, refund or other charges, as may be applicable. You absolutely and irrevocably agree to waive/ give up all other claims/rights arising in your favour under any applicable law(s) for the time being in force with respect to any consequential harm, loss and/or damage suffered by you as a result of your access and/or use of the Website or the services provided thereunder.</p>

                    <p>OneFineRate will not be responsible of any Death/ Loss of Property/ Fire/ Act of God or any damage or loss. OneFineRate cannot be held responsible for these losses directly or in directly and will not be liable of any damage loss.</p>

                    <p><strong>Termination</strong></p>

                    <p>The Company may terminate your account and/or the Services offered by the Company with immediate effect, without prior notice to you and without assigning any reason(s) whatsoever and remove all and any content and/or material and/or information that you may have uploaded and/or posted on the Website,</p>

                    <p>(a) If in the opinion of the Company, you have breached any of the terms and conditions of the Terms and/or,</p>

                    <p>(b) If, in the opinion of the Company and/or any regulatory authority, or in pursuance of an order, decree etc. of a court of law, it is not in the public interest and/or is illegal or has subsequently become illegal to continue providing such services to you for any reason whatsoever.</p>

                    <p><strong>Links and Advertisements</strong></p>

                    <p>The Website may provide, or third parties may provide, links to other World Wide Web sites or resources. Further, the Website may display or rely on certain data supplied to it by various third parties. The Company may have no control over such data, websites and resources and you acknowledge and agree that the Company is not responsible for the availability of such external sites or resources, and/or the accuracy of such displayed data, and does not endorse and is not responsible or liable for any inaccuracy/discrepancy and any consequent loss/damage resulting from such data, content, advertising, products, or other materials on or available from such third parties, sites or resources.</p>

                    <p>You further acknowledge and agree that the Company shall not be responsible or liable, directly or indirectly, for any damage or loss caused or alleged to be caused by or in connection with use of or reliance on any such content, goods or services available on or through any such site or resource.</p>

                    <p><strong>Jurisdiction and Governing Law </strong></p>

                    <p>These Terms and any dispute or claim arising out of or in connection with it or its subject matter or formation (including non-contractual disputes or claims) shall be governed by and construed in accordance with the laws of India. You hereby irrevocably agree that the courts in Delhi alone shall have the exclusive jurisdiction to settle any dispute or claim that arises out of or in connection with the Terms or its subject matter or formation (including non-contractual disputes or claims).</p>

                    <p><strong>Payment Gateway</strong></p>

                    <p>All payments made to the Company are processed through an external third party payment gateway service provider. Upon reaching the payment stage, you will be redirected to an external website that belongs to a third party payment gateway. You expressly agree to be bound by the terms and conditions of provision of services by such third party payment gateway and your payment(s) shall be processed in accordance with and subject to your acceptance of such terms. You further agree that any dispute pertaining to provision of services by such third party payment gateway shall be directly taken up with such third party by you, and you shall, at all times, keep the Company, its subsidiaries, its directors, officers, employees, agents, advertisers, licensors, suppliers, and partners indemnified from and against any claims, actions and/or demands and/or liabilities and/or losses and/or damages whatsoever arising from or resulting from or in any way related to your use and/or inability to use the services offered by such third party payment gateway.</p>

                    <p><strong>Entire agreement</strong></p>

                    <p>These Terms (together with our privacy policy), constitute the entire agreement between you and us in relation to your use of the Website and/or its Services, and supersedes any and all previous agreements in respect of your use of this the Website and/or its Services.</p>

                    <p>Supplementary agreements, terms and conditions, if any, shall apply depending on your use of the Website, its Services and choices/selections/inputs given by you while using the same, and your continued use of the Website and/or its Services shall be treated as your consent to such supplementary agreements, terms and conditions as well.</p>

                    <p><strong>Waiver and Severability of Terms </strong></p>

                    <p>The failure of the Company under any circumstances to exercise or enforce any right or provision of the Terms shall not constitute a waiver of such right or provision.</p>

                    <p>In the event that any of the stipulations and conditions or any portion thereof of these Terms is held by a court/tribunal of competent jurisdiction to be invalid, it is expressly understood and agreed that such condition or portion thereof shall be automatically considered deleted/replaced/modified to embrace the order of the said court/tribunal and the same shall not impair the enforceability of the remaining provisions of these Terms.</p>

                    <p><strong>User Credentials</strong></p>

                    <p>You agree to take all such measures as may be necessary to protect the secrecy of your user identification and/or password, and further agree to not reveal the same to any other person(s).&nbsp; You agree to use only your own user identification and/or password to access the Website, its Services or any part thereof. You further agree and acknowledge that you acquire no rights to any mailbox number and/or the user identification and/or any codes assigned to you by the Company.</p>

                    <p>You agree that except as otherwise proved herein, the Company reserves the right to change and/or re-assign the same at its sole discretion without being liable to you for any kind of damages and/or relief and/or any other consequence(s).</p>

                    <p>In the event of theft and/or loss of user identification and/or password and/or security word, you shall notify the Company immediately by e-mail and concurrently provide the Company with a written notice sent by Registered Post to that effect. You agree to remain liable for use of the Services by any third party until such theft or loss is notified to the Company.</p>

                    <p><strong>Privacy and User Data</strong></p>

                    <p>The Company at the time of registration and/or during your access to the Website and/or any of its Services or at any other time collect data from you (&ldquo;User Data&rdquo;). Such User Data is collected, stored, handled and transmitted as per the Privacy Policy of the Website as available on www.onefirerate.com/privacypolicy], which is hereby incorporated into these terms and conditions by this reference.</p>

                    <p>By agreeing to these Terms, you also hereby expressly agree to the Privacy Policy of the Website as available on www.onefirerate.com/privacypolicy.</p>

                    <p><strong>Grievance Officer</strong></p>

                    <p>Kindly address all your grievances regarding use of the Website to [contact@onefinerate.com]. The Company shall make all efforts to address your grievance within a period of one (1) month from the date of receipt of such grievance, in a manner compliant with law.</p>

                </div>

            </div>
        </div>
    </div>

    <!-- Privacy Policy pop up -->
    <div id="divprivacupolicy" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Privacy Policy</h4>
                </div>
                <div class="modal-body">
                        <p>This Privacy Policy is subject to the terms and conditions of the Terms of Use of www.onefinerate.com (the &ldquo;Website&rdquo;) which is available at https://onefinerate.com. This policy is effective from the date and time a user accepts the terms and conditions as laid out in the Terms of Use.</p>

                        <p>Any reference to the &ldquo;Company&rdquo;, &ldquo;us&rdquo;, &ldquo;we&rdquo; and &ldquo;our&rdquo; means Samaara Hotels and Services Pvt Ltd, having its registered office at 150, Tatvam Villas, Sohna Road, Sector 48, Gurgaon, Haryana. 122002.&nbsp;&nbsp;</p>

                        <p><strong>1. What information do we collect?</strong></p>

                        <p>While you may have access to some sections of the Website without being a registered member, access to certain sections and/or services and performance of certain activities do require registration.&nbsp;</p>

                        <p>When registering on the Website, we may ask you to disclose, including but not limited to, your:</p>

                        <p>-Name,</p>

                        <p>-E-mail address</p>

                        <p>-Mailing Address</p>

                        <p>-Pin Code</p>

                        <p>-Phone Number</p>

                        <p>-Gender</p>

                        <p>-Professional Interests</p>

                        <p>-Education</p>

                        <p>-Occupation</p>

                        <p>-Passport details</p>

                        <p>-Travel preferences</p>

                        <p>-Travel dates</p>

                        <p>-Booking details</p>

                        <p>-Social Media Sign up</p>

                        <p>We may also identify and use your IP address to help diagnose problems with our server, and to administer our Website. Your IP address is also used to help identify you and to gather broad demographic information.</p>

                        <p><strong>2. What do we use your information for?</strong></p>

                        <p>Any of the information we collect from you may be used, including but not limited to, in the following ways: to personalize your experience, to improve the Website, to improve customer service, to process transactions, to administer a contest, promotion, survey, advertisement or other Website feature, to send periodic emails, marketing purposes, and other collateral website specific activities.</p>

                        <p>You understand and agree that certain information, including but not limited to, your name, profile picture, posts, videos, pictures, travel preferences and other such information that you post and/or submit to the Website may be visible to other users in order to facilitate user interaction on the Website.</p>

                        <p>You agree that the Company may use your personal information to contact you and deliver information to you that, in some cases, are targeted to your interests, such as targeted banner advertisements, administrative notices, product offerings, and communications relevant to your use of the Website.</p>

                        <p>By accepting the Terms of Use and Privacy Policy, you expressly agree to receive this information. If you do not wish to receive these communications, we encourage you to opt out of the receipt of certain communications in your profile. You may make changes to your profile at any time.</p>

                        <p><strong>3. How do we protect your information?</strong></p>

                        <p>Every effort will be made to keep the information provided by you in a safe manner. We implement a variety of security measures to maintain the safety of your personal information when you enter, submit, or access your personal information.</p>

                        <p>We offer the use of a secure server. All supplied sensitive and personally identifiable information is transmitted via secure technology and then encrypted into our database to be only accessed by persons authorized with special access rights to our systems. Such persons are under strict instructions to keep the information confidential.</p>

                        <p><strong>4. Opt-out Mechanism </strong></p>

                        <p>You may, at any time while accessing the Website and/or availing the services or otherwise, decide to withdraw your consent towards letting the Company have access to and/or store information collected from you. A notice for such withdrawal of consent shall have to be e-mailed by you to us at assiatnce@onefinerate.com. We shall make all efforts to respond to you within 30 days from receipt of such notice, notifying our acknowledgment and acceptance of such notice (&ldquo;Response&rdquo;).</p>

                        <p>After receiving the Response, you may not use and/or access the Website and/or any services provided therein or any part thereof.</p>

                        <p><strong>5. Do we use cookies?</strong></p>

                        <p>Yes. Cookies are small files that a site or its service provider transfers to your computer&rsquo;s hard drive through your Web browser (if allowed by you) that enables the sites or service providers systems to recognize your browser and capture and remember certain information.</p>

                        <p>We use cookies to understand and save your preferences for future visits.</p>

                        <p>However, we may also use a third party advertisement company to display advertisements on the Website. These advertisements may contain cookies. Cookies received with banner advertisements are collected by such third party advertisement company, and we do not have access to this information.</p>

                        <p><strong>6. Do we disclose any information to outside parties?</strong></p>

                        <p>Yes. You hereby expressly agree to allow us to share information collected from you, including without limitation, your personal information/personally identifiable information with third parties for marketing purposes or where the disclosure is necessary for compliance of a legal obligation.</p>

                        <p>We may disclose all or part of the information collected from you in response to a request from the law enforcement authorities or in a case of bonafide requirement to prevent an imminent breach of the law.</p>

                        <p><strong>7. Third party links</strong></p>

                        <p>Occasionally, at our discretion, we may include or offer third party products or services on the Website. These third party websites have separate and independent privacy policies. We therefore have no responsibility or liability for the content and activities of these linked websites. Nonetheless, we seek to protect the integrity of the Website and welcome any feedback about these websites.</p>

                        <p><strong>8. Online Privacy Policy Only</strong></p>

                        <p>This online privacy policy applies only to information collected through the Website and not to information collected offline.</p>

                        <p><strong>9. Your Consent</strong></p>

                        <p>By accessing and/or using the Website and/or any services provided therein or any part thereof, you consent to our Privacy Policy.</p>

                        <p><strong>10. Changes to our Privacy Policy</strong></p>

                        <p>If we change our Privacy Policy, we will prominently post a link to those changes on the Website so that you are always aware of what information we collect, how we use it, and under what circumstances, if any, we disclose it.</p>

                </div>

            </div>
        </div>
    </div>
    .<!-- Hotel policy pop up -->
    <div id="divHotelPolicy" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Hotel Policy</h4>
                </div>
                <div class="modal-body">
                    <p>Reservation must be amended/cancelled 72 hours prior to the planned date of arrival. Reservations cancelled within 72 hours of the arrival date will incur a cancellation charge of one night. Peak Season cancellation must be done at least 7 days prior to arrival date to qualify for no cancellation charge. For group of 5 rooms or more confirmation for the reservation would only be given on the basis of a valid credit card. In case of a no-show or cancellation/amendment of the conference/group (in part or full), within 15 days or less from the date of check-in, a retention charge will be levied. In addition, should any participants check-out early, retention will be charged for those nights booked, now being released due to the early check-out.</p>
                </div>

            </div>
        </div>
    </div>
    <!-- Taxes pop up -->

    @{
        if (User.Identity.IsAuthenticated || ViewBag.type == "G")
        {
            var countryCodeList = OneFineRateBLL.BL_Country.GetAllCountryPhoneCodes();
            Model.CountryCodePhoneList = countryCodeList;

            @Html.Partial("pUserInformation", Model)
        }
        else
        {
            <div class="container">
                <div class="col-md-12 center margintop10">
                    <button type="button" id="btnRegisteredUserLogin" name="buttonType" value="login" disabled="" class="btn btn-inactive  btn-lg ">Log In</button>
                    <button type="submit" id="btnGuestUserLogin" disabled="" name="buttonType" value="guest" class="btn btn-inactive  btn-lg ">Continue as Guest</button>
                </div>
            </div>

        }
    }

    <div class="marginbottom10">&nbsp;</div>

    <div id="RoomDetails" class="modal fade" role="dialog">

    </div>
</div>


@System.Web.Optimization.Scripts.Render("~/bundles/ajaxpostform")
<link href="~/Content/horizontalSlider.css" rel="stylesheet" />

<script src="~/Scripts/horizontalSlider.js"></script>


<script type="text/javascript">
    $(document).ready(function () {
        $('[data-toggle="popover"]').popover();

        var popOverSettings = {
            placement: 'bottom',
            container: 'body',
            html: true,
            selector: '[rel="popover"]',
            content: function () {

            }
        }

        $('body').popover(popOverSettings);
    });

    $(function () {
        $('[data-toggle="tooltip"]').tooltip()
    });


</script>

<script type="text/javascript">

    function OpenHP() {
        $('#divHotelPolicy').modal({
            show: 'true'
        });
    }
    function Opentc() {

        $('#divTC').modal({
            show: 'true'
        });
    }
    function OpenPP() {
        $('#divprivacupolicy').modal({
            show: 'true'
        });
    }
    function OpenTaxes() {
        $('#divTaxes').modal({
            show: 'true'
        });
    }
    $(function () {
        $('#chkAgree').click(function () {
            if ($(this).is(':checked')) {
                $('#btnRegisteredUserLogin').removeAttr('disabled');
                $('#btnGuestUserLogin').removeAttr('disabled');
            } else {
                $('#btnRegisteredUserLogin').attr('disabled', 'disabled');
                $('#btnGuestUserLogin').attr('disabled', 'disabled');
            }
        });
    });


    function GetResult(data) {

        //debugger;

        if (data.st == '1') {

            $('#hdnPromoCodeApplied').val('true');

            toastr.success(data.msg);

            if (data.rtype == 1) {
                var myval = '@Model.Symbol';
                var amt = parseFloat(data.amt);
                var discount = parseFloat(data.disc);
                var grandtotal = ReplaceNumberWithCommas(amt.toFixed(2));
                //  grandtotal = grandtotal.toFixed(2);
                myval += grandtotal;
                $('#hdnPromoValue').val(discount);
                $('#hdnPromoValueDesc').val(data.discdesc);
                $('#spTotalAmt').html(myval);
                $('#sppromo').html(' @Model.Symbol ' + ReplaceNumberWithCommas(discount) + ' discount has been applied.');
                $('#hdnPromoCodeType').val('Value');
            }
            else {
                $('#sppromo').html(data.disc + ' free has been applied.');
                var amt = parseFloat(data.amt);
                var grandtotal = amt.toFixed(2);
                $('#spTotalAmt').val(grandtotal);
                $('#hdnPromoCodeType').val('Amenity');
                $('#hdnAmenityName').val(data.disc);
            }
        }
        else {

            $('#hdnPromoCodeApplied').val('false');

            $('#hdnPromoValue').val('0');
            $('#hdnPromoValueDesc').val('');
            toastr.error(data.msg);
            $('#sppromo').html('');
            var myval = '@Model.Symbol ';
            myval += ReplaceNumberWithCommas(parseFloat(data.amt).toFixed(2));
            $('#spTotalAmt').html(myval);
            $('#hdnPromoCodeType').val('');
            $('#hdnAmenityName').val('');
        }
    }
    function ReplaceNumberWithCommas(yourNumber) {
        //Seperates the components of the number
        yourNumber = Math.round(yourNumber);
        var n = yourNumber.toString().split(".");
        //Comma-fies the first part
        n[0] = n[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        //Combines the two sections
        return n.join(".");
    }
    function OpenPopUp(propid, roomid) {

        var url = '@Url.Action("RoomInfo", "OfferReview")?propid=' + propid + '&roomid=' + roomid;
        //startSpinning();
        $("#RoomDetails").load(url, function () {
            // stopSpinning();
        });
        $('#RoomDetails').modal({
            show: 'true'
        });
    }

</script>

<script type="text/javascript">
    var returnUrl = '';
    $(function () {

        if ('@Model.sActionType' == 'N') {  //Its for Negotiation
            $('#hdnNegoGrandTAmt').val('');
        }


        $('#anCalculate').click(function (e) {

            debugger;
            //e.preventDefault();
            var NegotiationAmount = $("#txtNegotiaionAmount").val();

            var isvalid = !isNaN(parseFloat($('#txtNegotiaionAmount').val())) && isFinite($('#txtNegotiaionAmount').val());
            if (!isvalid) {
                toastr.error('Please enter valid bargain amount.');
                return false;
            }
            //debugger;
            var TotalAmt = '@Model.dSummaryTotal';
            var amt = parseFloat(NegotiationAmount);
            var negamt = '@Model.dNegotiationAmtMax';


            if (amt >= negamt && amt < TotalAmt) {
            }
            else {
                toastr.info('Please enter amount greater than equals to @Model.sNegotiationAmtMax and less than  @Model.sSummaryTotal')
                return false;
            }

            var values = { NegotiationAmount: amt, TotalAmt: TotalAmt, propdetailguid:'@Model.TempDataPropDetails' };

            //  startSpinning();
            setTimeout(function () {
                var Data = AjaxCallWithDataMVC("@Url.Action("CalculateGrandTotal")", values);

                if (Data != null) {
                    //   stopSpinning();
                    if (Data.st == '1') {

                        $('#spgrantotal').show();
                        $('#spgrantotal').html('@Model.Symbol' + ' ' + Data.sGrandTotal);
                        $('#spgrantotal_span').show();
                        $('#hdnNegoGrandTAmt').val(Data.dGrandTotal);
                        $('#hdnNewTaxes').val(Data.dTaxAmt);
                        return false;
                    }
                    else if (Data.st == '0') {
                        $('#spgrantotal').html('');
                        $('#hdnNegoGrandTAmt').val('');
                        $('#spgrantotal_span').hide();
                        $('#hdnNewTaxes').val(0);
                        toastr.error(Data.msg);
                        return false;
                    }
                }
            }, 100);

        });





        $('#txtNegotiaionAmount').blur(function () {
            var isvalid = !isNaN(parseFloat($('#txtNegotiaionAmount').val())) && isFinite($('#txtNegotiaionAmount').val());
            if (!isvalid) {
                $('#spgrantotal').html('');
                $('#hdnNegoGrandTAmt').val('');
                $('#spgrantotal_span').hide();
                return false;
            }

            var TotalAmt = '@Model.dSummaryTotal';
            var amt = parseFloat($('#txtNegotiaionAmount').val());
            var negamt = '@Model.dNegotiationAmtMax';


            if (amt >= negamt && amt < TotalAmt) {
            }
            else {
                toastr.info('Please enter amount greater than equals to @Model.sNegotiationAmtMax and less than  @Model.sSummaryTotal')
                $('#spgrantotal').html('');
                $('#hdnNegoGrandTAmt').val('');
                $('#spgrantotal_span').hide();
                $('#hdnNewTaxes').val(0);
                return false;
            }
        });
    });
    $(document).on('click', "#homePageLoginRegisterLink", function (e) {
        e.preventDefault();

        var codeValue = $('#txtPromoCode').val();
        var promoCodeApplied = $('#hdnPromoCodeApplied').val();

        localStorage.setItem('hdnPromoCodeApplied', promoCodeApplied);
        localStorage.setItem('hdnPromoCode', codeValue);
        localStorage.setItem('hdnChkAgree', $('#chkAgree').prop('checked'));
    });


    $(document).on('click', "#btnGuestUserLogin", function (e)
    {
        e.preventDefault();

        var codeValue = $('#txtPromoCode').val();
        var promoCodeApplied = $('#hdnPromoCodeApplied').val();

        localStorage.setItem('hdnPromoCodeApplied', promoCodeApplied);
        localStorage.setItem('hdnPromoCode', codeValue);
        localStorage.setItem('hdnChkAgree', $('#chkAgree').prop('checked'));
            //debugger;
            if ('@Model.sActionType' == 'N') {  //Its for Negotiation
                var NegotiationAmount = $("#txtNegotiaionAmount").val();

                var isvalid = !isNaN(parseFloat($('#txtNegotiaionAmount').val())) && isFinite($('#txtNegotiaionAmount').val());
                if (!isvalid) {
                    toastr.error('Please enter valid bargain amount.');
                    $("#txtNegotiaionAmount").focus();
                    return false;
                }
                var amt = parseFloat(NegotiationAmount);
                var negamt = '@Model.dNegotiationAmtMax';
                var TotalAmt = '@Model.dSummaryTotal';

                if (amt >= negamt && amt < TotalAmt) {
                    window.location.href = "/Negotiation?type=G&info=" + NegotiationAmount + '&propdetailguid=' + $('#TempDataPropDetails').val() + "#fill";
                }
                else {
                    toastr.info('Please enter amount greater than equals to @Model.sNegotiationAmtMax and less than  @Model.sSummaryTotal')
                    $("#txtNegotiaionAmount").focus();
                }
            }
            else {
                window.location.href = "/Negotiation?type=G&info=0" + '&propdetailguid=' + $('#TempDataPropDetails').val()+"#fill";   //Its for Buy Option
            }
        });

    $(function () {
        $("#btnRegisteredUserLogin").click(function () {

            //debugger;

            if ('@Model.sActionType' == 'N') {  //Its for Negotiation
                var NegotiationAmount = $("#txtNegotiaionAmount").val();
                var isvalid = !isNaN(parseFloat($('#txtNegotiaionAmount').val())) && isFinite($('#txtNegotiaionAmount').val());
                if (!isvalid) {
                    toastr.error('Please enter valid bargain amount.');
                    $("#txtNegotiaionAmount").focus();
                    return false;
                }
                var amt = parseFloat(NegotiationAmount);
                var negamt = '@Model.dNegotiationAmtMax';
                var TotalAmt = '@Model.dSummaryTotal';
                var guidValue = '@Model.TempDataPropDetails';
                if (amt >= negamt && amt < TotalAmt) {
                    //returnUrl = "/Negotiation?type=L&info=" + NegotiationAmount;


                    $('.nav-tabs a[href="#signin"]').tab('show');
                    var url =
                    CheckPopupAvailibility(function () {
                            $('input[id="hdnExternalLoginReturnUrl"]').val("/Negotiation?type=L&info=" + NegotiationAmount + "&propdetailguid=" + guidValue + "#fill");
                            $('#hdnLoginReturnUrl').val("/Negotiation?type=L&info=" + NegotiationAmount + "&propdetailguid=" + guidValue + "#fill")
                            $('#homePageLoginRegisterLink').click();

                    });

                    //LoginPopUp();
                }
                else {
                    toastr.info('Please enter amount greater than equals to @Model.sNegotiationAmtMax and less than @Model.sSummaryTotal')
                    $("#txtNegotiaionAmount").focus();
                }
            }
            else //Its for Buy Option
            {


                var codeValue = $('#txtPromoCode').val();
                var promoCodeApplied = $('#hdnPromoCodeApplied').val();
                localStorage.setItem('hdnPromoCodeApplied', promoCodeApplied);
                localStorage.setItem('hdnPromoCode', codeValue);
                localStorage.setItem('hdnChkAgree', $('#chkAgree').prop('checked'));

                //returnUrl = "/Negotiation?type=L";
                //LoginPopUp();
               // var url = "/Negotiation/Index?type=L#fill";

                $('.nav-tabs a[href="#signin"]').tab('show');
                var url =
                    CheckPopupAvailibility(function () {
                        //debugger;
                        $('input[id="hdnExternalLoginReturnUrl"]').val("/Negotiation?type=L&info=&propdetailguid=@Model.TempDataPropDetails#fill");
                     $('#hdnLoginReturnUrl').val("/Negotiation?type=L&info=&propdetailguid=@Model.TempDataPropDetails#fill");
                        $('#homePageLoginRegisterLink').click();

                    });
            }
        });


        function LoginPopUp() {

            $("#genericModalPopupContainer").load('@Url.Action("GetLoginRegisterForm", "Account")', function () {

                $('#genericModalPopupDiv').modal('show');
                $.validator.unobtrusive.parse($('#registerForm'));
                $.validator.unobtrusive.parse($('#loginForm'));
            });

            $('#genericModalPopupDiv').delegate('#loginForm', 'submit', function (event) {
                //debugger;
                event.preventDefault();
                var currentForm = $(this);
                if (currentForm.valid()) {

                    var frmData = currentForm.serialize();
                    $.post($(this).attr('action'), frmData).done(function (data) {

                        if (data.status == false && data.errors) {

                            $('#loginPassword').val('').focus();
                            $('#loginErrors').html(data.errors);
                        }
                        else if (data.status == true && data.returnUrl) {

                            window.location.href = data.returnUrl
                        }
                        else if (data.status == true) {

                            window.location.href = returnUrl;
                        }

                    }).fail(function (data) {

                        $('#loginErrors').html('An error occured !');

                    }).always(function () {

                    });
                }
            });



            $('#loginForm').submit(function (event) {
                event.preventDefault();
                $.ajax({
                    data: $(this).serialize(),
                    url: $(this).attr('action'),
                    success: function (data) {

                        alert('inside Success')
                        if (data.status == true) {
                            location.href = returnUrl;
                        }
                        else if (data.status == false) {
                            alert('error')
                        }
                    }
                }).always(function () {
                    //  stopSpinning();
                });
            });
        }

    });

</script>


@{ var amount = ViewBag.NegotiationAmount; }
@if (!string.IsNullOrEmpty(amount) && Convert.ToDecimal(amount) != 0)
{
    <script>
        setTimeout(function () {

            $('#anCalculate').click();

        }, 100);

    </script>
}

<script>
        $(function () {

            //debugger;

            var valueForPromo = localStorage.getItem('hdnPromoCodeApplied');

            var sPromoCode = localStorage.getItem('hdnPromoCode');

            var bIsAgree = localStorage.getItem('hdnChkAgree');

            localStorage.removeItem('hdnPromoCode');
            localStorage.removeItem('hdnPromoCodeApplied');
            localStorage.removeItem('hdnChkAgree');

            if (valueForPromo == 'true') {

                $('#txtPromoCode').val(sPromoCode);
                $('#btnApplyPromo').click();

            }

            if (bIsAgree == 'true') {
                $('#chkAgree').prop('checked', true);

                $('html,body').animate({
                    scrollTop: $("#frmUserDetails").offset().top
                }, 1000);
            }
        });
</script>